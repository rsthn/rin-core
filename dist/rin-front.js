parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"axtM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;let e={};var t=e;exports.default=t,e.invokeLater=function(e){e&&setTimeout(function(){e()},10)},e.wait=function(e){return new Promise(function(t,n){setTimeout(t,e)})},e.typeOf=function(e){return e instanceof Array?"array":null===e?"null":(typeof e).toString().toLowerCase()},e.isArrayOrObject=function(t){switch(e.typeOf(t)){case"array":case"object":return!0}return!1},e.clone=function(t){var n;if("array"==e.typeOf(t)){n=[];for(let r=0;r<t.length;r++)n.push(e.clone(t[r]))}else if("object"==e.typeOf(t)){n={};for(let r in t)n[r]=e.clone(t[r])}else n=t;return n},e.merge=function(t,...n){if("array"==e.typeOf(t))for(let r=0;r<n.length;r++){let i=n[r];if("array"!=e.typeOf(i))t.push(i);else for(let n=0;n<i.length;n++)t.push(e.clone(i[n]))}else if("object"==e.typeOf(t))for(let r=0;r<n.length;r++){let i=n[r];if("object"==e.typeOf(i))for(let n in i)e.isArrayOrObject(i[n])?n in t?e.merge(t[n],i[n]):t[n]=e.clone(i[n]):t[n]=i[n]}return t},e.override=function(e,...t){for(let n=0;n<t.length;n++)for(let r in t[n])e[r]=t[n][r];return e},e.partialCompare=function(e,t){if(null==e||null==t)return!1;if(e===t)return!0;for(var n in t)if(e[n]!=t[n])return!1;return!0},e.arrayFind=function(e,t,n){for(var r=0;e&&r<e.length;r++)if(this.partialCompare(e[r],t))return n?e[r]:r;return!!n&&null},e.indexOf=function(e,t,n=!1){if(n){for(let n=0;n<e.length;n++)if(e[n]===t)return n;return-1}for(let r in e)if(e[r]===t)return r;return-1},e.escape=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.ensureTypeOf=function(e,t){return!t||!e||t instanceof e?t:t.isInstanceOf&&e.prototype.className&&t.isInstanceOf(e.prototype.className)?t:new e(t)},e.isTypeOf=function(e,t){return!t||!e||t instanceof e||!!(t.isInstanceOf&&e.prototype.className&&t.isInstanceOf(e.prototype.className))},e.serialize=function(e){return JSON.stringify(e)},e.deserialize=function(e){return JSON.parse(e)},e.hookAppend=function(e,t,n,r=!0){const i=e[t];return e[t]=r?function(...e){if(!1!==i.apply(this,e))return n.apply(this,e)}:function(...e){return i.apply(this,e),n.apply(this,e)},{unhook:function(){e[t]=i}}},e.hookPrepend=function(e,t,n,r=!0){const i=e[t];return e[t]=r?function(...e){if(!1!==n.apply(this,e))return i.apply(this,e)}:function(...e){return n.apply(this,e),i.apply(this,e)},{unhook:function(){e[t]=i}}};
},{}],"xPXT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./alpha.js"));function e(t){return t&&t.__esModule?t:{default:t}}let s=function(){};var r=s;exports.default=r,s._class=s,s._super={},s.prototype.className="Class",s.prototype.__ctor=function(){},s.prototype.__dtor=function(){},s.prototype.isInstanceOf=function(e){return(e="string"==t.default.typeOf(e)?e:e.prototype?e.prototype.className:e.constructor.prototype.className)in this._super||this.className==e},s.prototype._initSuperRefs=function(){var e=this.constructor._super,s={};for(let r in e){let o={},p=e[r].prototype;for(let e in p)"function"==t.default.typeOf(p[e])&&(o[e]=p[e].bind(this));s[r]=o}this._super=s},s.inherit=function(e){var s=this._class,r=s._super,o=s._class;if("function"==t.default.typeOf(e)){for(let t in e._class)/^[A-Z]/.test(t)||(s[t]=e._class[t]);t.default.override(s.prototype,e._class.prototype),t.default.override(r,e._class._super),e._class.prototype.className&&(r[e._class.prototype.className]=e._class)}else t.default.override(s.prototype,e);return s._super=r,s._class=o,s},s.prototype._extend=function(t,e){var r=function(...t){this._initSuperRefs(),this.__ctor.apply(this,t)};r._class=r,r._super={},s.inherit.call(r,t),delete r.prototype.className;for(let s=0;s<e.length;s++)r.inherit(e[s]);return delete r._super.Class,"classInit"in r.prototype&&r.prototype.classInit(),r},s.extend=function(...t){return this._class.prototype._extend(this,t)},s.create=function(t){return new(this.extend(t))};
},{"./alpha.js":"axtM"}],"K4NB":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=e(require("./alpha.js")),s=e(require("./class.js"));function e(t){return t&&t.__esModule?t:{default:t}}var h=s.default.extend({className:"Event",source:null,name:null,args:null,_async:!1,list:null,next:null,ret:null,original:null,i:-1,__ctor:function(t,i,s,e,h,n){this.source=t,this.name=s,this.args=e,this.cbHandler=h,this.cbContext=n,this.list=i,this.reset()},reset:function(){return this.next=null,this.ret=[],this._async=!1,this.i=-1,this},setSource:function(t){return this.source=t,this},wait:function(){return this._async=!0,this},resume:function(){for(this._async=!1;!(this._async||++this.i>=this.list.length);)if(!this.list[this.i].silent)if("string"==i.default.typeOf(this.list[this.i].handler)){if(this.list[this.i].context){if(!this.list[this.i].context[this.list[this.i].handler])continue;if(!1===this.list[this.i].context[this.list[this.i].handler](this,this.args,this.list[this.i].data))break}else if(!1===t[this.list[this.i].handler].call(null,this,this.args,this.list[this.i].data))break}else if(!1===this.list[this.i].handler.call(this.list[this.i].context,this,this.args,this.list[this.i].data))break;return this._async?this:(this.i>=this.list.length&&this.next&&this.next.resume(),this.cbHandler&&this.cbHandler.call(this.cbContext),this)},from:function(t){return this.original=t,this},enqueue:function(t){if(!t)return this;var i;for(i=this;null!=i.next;i=i.next);return i.next=t,t.from(this),this}});exports.default=h;
},{"./alpha.js":"axtM","./class.js":"xPXT"}],"aK92":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./class.js")),t=s(require("./event.js"));function s(e){return e&&e.__esModule?e:{default:e}}var n=e.default.extend({className:"EventDispatcher",listeners:null,namespace:null,__ctor:function(){this.listeners={}},setNamespace:function(e){return this.namespace=e,this},addEventListener:function(e,t,s,n){var i=(e=e.split(":"))[e.length-1],r=e.length>1?e[0]:null;return this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push({ns:r,handler:t,context:s,data:n,silent:0}),this},removeEventListener:function(e,t,s){var n=(e=e.split(":"))[e.length-1],i=e.length>1?e[0]:null;if("*"==n)for(var r in this.listeners)for(var l=this.listeners[r],h=0;h<l.length;h++){var a=!0;t&&(a=a&&l[h].handler===t),s&&(a=a&&l[h].context===s),i&&(a=a&&l[h].ns==i),a&&l.splice(h--,1)}else{if(!this.listeners[n])return this;for(l=this.listeners[n],h=0;h<l.length;h++){a=!0;t&&(a=a&&l[h].handler===t),s&&(a=a&&l[h].context===s),i&&(a=a&&l[h].ns==i),a&&l.splice(h--,1)}}return this},prepareEvent:function(e,s,n,i){var r=[],l=(e=e.split(":"))[e.length-1],h=e.length>1?e[0]:null;this.listeners[l]&&(r=r.concat(this.listeners[l])),this.listeners["*"]&&(r=r.concat(this.listeners["*"]));for(var a=0;a<r.length;a++)r[a].silent&&r.splice(a--,1);if(h)for(a=0;a<r.length;a++)r[a].ns!=h&&r.splice(a--,1);return new t.default(this,r,l,s,n,i)},silence:function(e,t){var s=(e=e.split(":"))[e.length-1],n=e.length>1?e[0]:null;if(t=!1===t?-1:1,"*"==s)for(var i in this.listeners)for(var r=this.listeners[i],l=0;l<r.length;l++)n&&r[l].ns!=n||(r[l].silent+=t);else{if(!this.listeners[s])return this;for(r=this.listeners[s],l=0;l<r.length;l++)n&&r[l].ns!=n||(r[l].silent+=t)}return this},dispatchEvent:function(e,t,s,n){return this.prepareEvent(this.namespace?this.namespace+":"+e:e,t,s,n).resume()}});exports.default=n;
},{"./class.js":"xPXT","./event.js":"K4NB"}],"S8C1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={email:/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)+$/i,url:/^[\w-]+:\/\/[\w-]+(\.\w+)+.*$/,urlNoProt:/^[\w-]+(\.\w+)+.*$/,name:/^[-A-Za-z0-9_.]+$/,uname:/^['\pL\pN ]+$/,text:/^[^&<>{}]*$/,utext:/^([\r\n\pL\pN\pS &!@#$%*\[\]()_+=;',.\/?:"~-]+)$/};exports.default=e;
},{}],"JVzn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _alpha=_interopRequireDefault(require("./alpha.js")),_modelRegex=_interopRequireDefault(require("./model-regex.js"));function _interopRequireDefault(r){return r&&r.__esModule?r:{default:r}}var _default={_getref:function(value,obj){return"string"==typeof value?("#"==value.substr(0,1)?value=obj.get(value.substr(1)):"@"==value.substr(0,1)&&(value=obj[value.substr(1)]),"string"==typeof value?eval(value):value):value},type:function(r,e,t,a){switch(e){case"int":if(a=parseInt(a),isNaN(a))throw new Error(e);break;case"float":if(a=parseFloat(a),isNaN(a))throw new Error(e);break;case"string":a=null==a?"":a.toString();break;case"bit":if(!0===a||!1===a){a=a?1:0;break}if(a=parseInt(a),isNaN(a))throw new Error(e);a=a?1:0;break;case"array":if("array"==_alpha.default.typeOf(a))break;if(null==a){a=[];break}throw new Error(e);case"bool":if("true"===a||!0===a){a=!0;break}if("false"===a||!1===a){a=!1;break}throw new Error(e)}return a},model:function(r,e,t,a){var n=this._getref(e,r);if(!n)throw new Error(e);return a?n.ensure(a):new n},cls:function(r,e,t,a){var n=this._getref(e,r);return a?_alpha.default.ensureTypeOf(n,a):new n},arrayof:function(r,e,t,a){var n=this._getref(e,r);if(a||(a=[]),!n||"array"!=_alpha.default.typeOf(a))throw new Error(e);for(var o=0;o<a.length;o++)a[o]=_alpha.default.ensureTypeOf(n,a[o]);return a},arraynull:function(r,e,t,a){var n=!1;if("object"==_alpha.default.typeOf(e)&&(e.remove&&(n=e.remove),e=e.value),e)return a;if("array"!=_alpha.default.typeOf(a))throw new Error(e);for(var o=0;o<a.length;o++)if(null==a[o]){if(!n)throw new Error(e);a.splice(o--,1)}return a},arraycompliant:function(r,e,t,a){var n=!1;if("object"==_alpha.default.typeOf(e)&&(e.remove&&(n=e.remove),e=e.value),!e)return a;if("array"!=_alpha.default.typeOf(a))throw new Error(e);for(var o=0;o<a.length;o++)if(null!=a[o]&&!a[o].isCompliant()){if(!n)throw new Error(e);a.splice(o--,1)}return a},required:function(r,e,t,a){if(null==a)throw new Error(e?"":"null");switch(_alpha.default.typeOf(a)){case"array":if(0==a.length)throw new Error(e?"":"null");break;default:if(0==a.toString().length)throw new Error(e?"":"null")}return a},minlen:function(r,e,t,a){if(a.toString().length<e)throw new Error(e);return a},maxlen:function(r,e,t,a){if(a.toString().length>e)throw new Error(e);return a},minval:function(r,e,t,a){if(parseFloat(a)<e)throw new Error(e);return a},maxval:function(r,e,t,a){if(parseFloat(a)>e)throw new Error(e);return a},mincount:function(r,e,t,a){if("array"!=_alpha.default.typeOf(a)||a.length<e)throw new Error(e);return a},maxcount:function(r,e,t,a){if("array"!=_alpha.default.typeOf(a)||a.length>e)throw new Error(e);return a},pattern:function(r,e,t,a){if(!_modelRegex.default[e].test(a.toString()))throw new Error(e);return a},inset:function(r,e,t,a){if("array"!=_alpha.default.typeOf(e)){if(!new RegExp("^("+e.toString()+")$").test(a.toString()))throw new Error(e);return a}if(-1==e.indexOf(a.toString()))throw new Error(e.join("|"));return a},upper:function(r,e,t,a){return e?a.toString().toUpperCase():a},lower:function(r,e,t,a){return e?a.toString().toLowerCase():a}};exports.default=_default;
},{"./alpha.js":"axtM","./model-regex.js":"S8C1"}],"rbeK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./alpha.js")),e=s(require("./event-dispatcher.js")),i=s(require("./model-constraints.js"));function s(t){return t&&t.__esModule?t:{default:t}}let n=e.default.extend({className:"Model",defaults:null,constraints:null,data:null,changedList:null,_silent:0,_level:0,__ctor:function(t,e){if(this._super.EventDispatcher.__ctor(),this.data={},null!=e)this.reset(e);else{var i=null;if(!this.defaults&&this.constraints){i={};for(var s in this.constraints){var n=this.constraints[s];null!==n.def&&void 0!==n.def?"function"==typeof n.def?i[s]=n.def():i[s]=n.def:i[s]=null}}this.reset(i)}this.init(),null!=t&&this.set(arguments[0],!0),this.constraints&&this.update(),this.ready()},reset:function(e,i){if(!this.defaults){if(!e||"object"!=t.default.typeOf(e)&&"function"!=t.default.typeOf(e))return this;this.defaults=e}return"function"==t.default.typeOf(this.defaults)?this.data=this.defaults():this.data=t.default.clone(this.defaults),!1===i||!1===e?this:this.update(null,!0)},init:function(){},ready:function(){},silent:function(t){return this._silent+=t?1:-1,this},_validate:function(t,e){if(!this.constraints||!this.constraints[t])return e;var i=this.constraints[t],s=e;for(var a in i)if(n.Constraints[a])try{s=n.Constraints[a](this,i[a],t,s)}catch(r){if("null"==r.message)break;throw new Error(`Constraint [${a}:${i[a]}] failed on property '${t}'.`)}return s},_set:function(t,e){if(!this.constraints||!this.constraints[t])return this.data[t]=e,e;var i=this.constraints[t],s=(this.data[t],e);for(var a in i)if(n.Constraints[a])try{s=n.Constraints[a](this,i[a],t,s)}catch(r){if("null"==r.message)break;this._silent||this.dispatchEvent("constraintError",{constraint:a,message:r.message,name:t,value:e});break}return this.data[t]=s},_propertyEvent:function(t,e,i,s){var n={name:t,old:e,value:i,level:this._level},a=this.dispatchEvent("propertyChanging",n);s?this.data[t]=n.value:n.value=this._set(t,n.value),null!=a&&a.ret.length&&!1===a.ret[0]||(this.dispatchEvent("propertyChanged."+t,n),this.dispatchEvent("propertyChanged",n),this.changedList.push(t))},set:function(){var e=arguments.length,i=!1,s=!1;if((e>2||2==e&&"object"==t.default.typeOf(arguments[0]))&&"boolean"==t.default.typeOf(arguments[e-1])&&!1===(i=arguments[--e])&&(s=!0),0==this._level&&(this.changedList=[]),this._level++,2==e)(this.data[arguments[0]]!=arguments[1]||i)&&(this._silent||s?this._set(arguments[0],arguments[1]):this._propertyEvent(arguments[0],this.data[arguments[0]],this._validate(arguments[0],arguments[1])));else for(var n in arguments[0])(this.data[n]!=arguments[0][n]||i)&&(this._silent||s?this._set(n,arguments[0][n]):this._propertyEvent(n,this.data[n],this._validate(n,arguments[0][n])));return--this._level||!this.changedList.length||s||this._silent||this.dispatchEvent("modelChanged",{fields:this.changedList}),this},has:function(t){return t in this.data},get:function(t,e){return 0==arguments.length||!1===t?this.data:1==arguments.length&&!0===t?this.flatten():2==arguments.length&&void 0===this.data[t]?e:this.data[t]},getInt:function(t,e){return 2==arguments.length&&void 0===this.data[t]?e:parseInt(this.data[t])},getFloat:function(t,e){return 2==arguments.length&&void 0===this.data[t]?e:parseFloat(this.data[t])},getBool:function(t,e){return"true"===(t=2==arguments.length&&void 0===this.data[t]?e:this.data[t])||!0===t||"false"!==t&&!1!==t&&!!parseInt(t)},getReference:function(t){var e=this;return{get:function(){return e.get(t)},set:function(i){e.set(t,i)}}},constraint:function(e,i,s){if(3==arguments.length||2==arguments.length||1==arguments.length&&"object"==t.default.typeOf(e)){switch(this.constraints===this.constructor.prototype.constraints&&(this.constraints=t.default.clone(this.constraints)),arguments.length){case 1:t.default.override(this.constraints,e);break;case 2:t.default.override(this.constraints[e],i);break;case 3:this.constraints[e][i]=s}return this}return e?this.constraints[e]:this},flatten:function(e,i){if(e)return null==(a=this.flatten(!1,!0))?null:(a.class=this.classPath,a);if(!this.constraints&&!this.defaults)return this.data;if(!this.isCompliant())return{};var s=this.constraints,n=this.defaults?"function"==t.default.typeOf(this.defaults)?this.defaults():this.defaults:this.constraints,a={};for(var r in this.data)if(r in n){if(s&&s[r]){var h=s[r];if(h.model){a[r]=this.data[r]?this.data[r].flatten(i):null;continue}if(h.arrayof){a[r]=[];for(var l=0;l<this.data[r].length;l++)a[r][l]=this.data[r][l]?this.data[r][l].flatten(i):null;continue}if(h.cls){a[r]=this.data[r]?this.data[r].flatten():null;continue}}a[r]=this.data[r]}return a},remove:function(e,i){if("array"==t.default.typeOf(e)){for(var s=0;s<e.length;s++)delete this.data[e[s]];!1===i||this._silent||this.dispatchEvent("propertyRemoved",{fields:e})}else delete this.data[e],!1===i||this._silent||this.dispatchEvent("propertyRemoved",{fields:[e]})},update:function(e,i){if(this._silent)return this;if(0==this._level&&(this.changedList=[]),this._level++,e&&"string"==t.default.typeOf(e))this._propertyEvent(e,this.data[e],this.data[e],i);else if(e&&"array"==t.default.typeOf(e))for(var s of e)this._propertyEvent(s,this.data[s],this.data[s],i);else for(var s in this.data)this._propertyEvent(s,this.data[s],this.data[s],i);return--this._level||this._silent||0==this.changedList.length&&!0!==e||this.dispatchEvent("modelChanged",{fields:this.changedList}),this},validate:function(e){if(!this.constraints)return this;if(e&&"string"==t.default.typeOf(e))this._set(e,this.data[e]);else for(var i in this.data)e&&-1==t.default.indexOf(e,i)||this._set(i,this.data[i]);return this},isCompliant:function(){if(!this.constraints)return!0;try{for(var t in this.data)this._validate(t,this.data[t]);return!0}catch(e){}return!1},observe:function(t,e,i){this.addEventListener("propertyChanged."+t,e,i)},unobserve:function(t,e,i){this.removeEventListener("propertyChanged."+t,e,i)},toString:function(){return t.default.serialize(this.get(!0))}});n.Constraints=i.default;var a=n;exports.default=a;
},{"./alpha.js":"axtM","./event-dispatcher.js":"aK92","./model-constraints.js":"JVzn"}],"J25A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./alpha.js")),e=n(require("./model.js"));function n(t){return t&&t.__esModule?t:{default:t}}var i=e.default.extend({className:"ModelList",itemt:e.default,contents:null,itemId:null,nextId:null,defaults:{contents:null},constraints:{contents:{type:"array",arrayof:"@itemt"}},__ctor:function(...t){this.itemId=[],this.nextId=0,this._super.Model.__ctor(...t)},ready:function(){this._eventGroup="ModelList_"+Date.now()+":modelChanged",this.contents=this.data.contents},_bind:function(t,e){return e&&e.addEventListener&&e.addEventListener(this._eventGroup,this._onItemEvent,this,t),e},_unbind:function(t){return t&&t.removeEventListener&&t.removeEventListener(this._eventGroup),t},_onItemEvent:function(t,e,n){this.prepareEvent("itemChanged",{id:n,item:t.source}).from(t).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()},length:function(){return this.data.contents.length},clear:function(){for(var t=0;t<this.data.contents;t++)this._unbind(this.data.contents[t]);this.itemId=[],this.nextId=0,this.data.contents=[],this.prepareEvent("itemsCleared").enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()},setData:function(e){if(this.clear(),e){for(var n=0;n<e.length;n++){var i=t.default.ensureTypeOf(this.itemt,e[n]);this.itemId.push(this.nextId++),this.data.contents.push(i),this._bind(this.nextId-1,i)}this.prepareEvent("itemsChanged").enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume()}},getData:function(){return this.data.contents},getAt:function(t){return t<0||t>=this.data.contents.length?null:this.data.contents[t]},removeAt:function(t){if(t<0||t>=this.data.contents.length)return null;let e=this.data.contents.splice(t,1)[0],n=this.itemId.splice(t,1)[0];return this._unbind(e),this.prepareEvent("itemRemoved",{id:n,item:e}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),e},setAt:function(e,n){return!(e<0||e>=this.data.contents.length)&&(n=t.default.ensureTypeOf(this.itemt,n),this._unbind(this.data.contents[e]),this.data.contents[e]=n,this._bind(this.itemId[e],n),this.prepareEvent("itemChanged",{id:this.itemId[e],item:n}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),!0)},updateAt:function(t){return!(t<0||t>=this.data.contents.length)&&(this.prepareEvent("itemChanged",{id:this.itemId[t],item:this.data.contents[t]}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),!0)},push:function(e){return e&&"object"!=t.default.typeOf(e)?null:(e=t.default.ensureTypeOf(this.itemt,e),this.itemId.push(this.nextId++),this.data.contents.push(e),this._bind(this.nextId-1,e),this.prepareEvent("itemAdded",{id:this.itemId[this.itemId.length-1],item:e,position:"tail"}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),e)},pop:function(){return this._unbind(this.data.contents.pop())},unshift:function(e){return e&&"object"!=t.default.typeOf(e)?null:(e=t.default.ensureTypeOf(this.itemt,e),this.itemId.unshift(this.nextId++),this.data.contents.unshift(e),this._bind(this.nextId-1,e),this.prepareEvent("itemAdded",{id:this.itemId[0],item:e,position:"head"}).enqueue(this.prepareEvent("modelChanged",{fields:["contents"]})).resume(),e)},shift:function(){return this._unbind(this.data.contents.shift())},find:function(e,n){for(var i=this.data.contents,s=0;s<i.length;s++)if(t.default.partialCompare(i[s].data,e))return n?i[s]:s;return n?null:-1}});exports.default=i;
},{"./alpha.js":"axtM","./model.js":"rbeK"}],"xgn1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("./alpha.js"));function n(t){return t&&t.__esModule?t:{default:t}}let e={Type:function(n){let e={flatten:function(t,n){return t},unflatten:function(t,n){return t}};return n?t.default.override(e,n):e},String:function(){return e.Type({flatten:function(t,n){return null!=t?t.toString():null},unflatten:function(t,n){return null!=t?t.toString():null}})},Integer:function(){return e.Type({flatten:function(t,n){return~~t},unflatten:function(t,n){return~~t}})},Number:function(t){return e.Type({_precision:t,_round:!1,precision:function(t){return this._precision=~~t,this},flatten:function(t,n){return t=parseFloat(t),this._precision>0&&(t=~~(t*Math.pow(10,this._precision))/Math.pow(10,this._precision)),t},unflatten:function(t,n){return parseFloat(t)}})},Bool:function(t){return e.Type({_compact:t,compact:function(t){return this._compact=t,this},flatten:function(t,n){return t=~~t,this._compact?t>0?1:0:t>0},unflatten:function(t,n){return!!~~t}})},SharedString:function(){return e.Type({flatten:function(t,n){return null==t?0:(t=t.toString(),"strings"in n||(n.strings_map={},n.strings=[]),t in n.strings_map||(n.strings.push(t),n.strings_map[t]=n.strings.length),n.strings_map[t])},unflatten:function(t,n){return null==t||0==t?null:n.strings[~~t-1]}})},Array:function(t){return e.Type({itemType:t,_debug:!1,debug:function(t){return this._debug=t,this},of:function(t){return this.itemType=t,this},flatten:function(t,n){if(null==t)return null;let e=[];for(let r=0;r<t.length;r++)e.push(this.itemType.flatten(t[r],n));return e},unflatten:async function(t,n){if(null==t)return null;let e=[];for(let r=0;r<t.length;r++)e.push(await this.itemType.unflatten(t[r],n));return e}})},Object:function(){return e.Type({properties:[],property:function(t,n,e=null){return this.properties.push({name:t,type:n,defvalue:e}),this},flatten:function(t,n){if(null==t)return null;let e;if(!0===n.symbolic){e={};for(let r=0;r<this.properties.length;r++)e[this.properties[r].name]=this.properties[r].type.flatten(t[this.properties[r].name],n)}else{e=[];for(let r=0;r<this.properties.length;r++)e.push(this.properties[r].type.flatten(t[this.properties[r].name],n))}return e},unflatten:async function(t,n){if(null==t)return null;let e={};if(!0===n.symbolic)for(let r=0;r<this.properties.length;r++)e[this.properties[r].name]=await this.properties[r].type.unflatten(this.properties[r].name in t?t[this.properties[r].name]:this.properties[r].defvalue,n);else for(let r=0;r<this.properties.length;r++)e[this.properties[r].name]=await this.properties[r].type.unflatten(r in t?t[r]:this.properties[r].defvalue,n);return e}})},Class:function(t){return e.Type({_constructor:t,constructor:function(t){return this._constructor=t,this},flatten:function(t,n){return null==t?null:t.flatten(n)},unflatten:async function(t,n){return null==t?null:await(new this._constructor).unflatten(t,n)}})},Property:function(t,n){return e.Type({property:t,type:n,name:function(t){return this.property=t,this},is:function(t){return this.type=t,this},flatten:function(t,n){if(null==t)return null;let e;return!0===n.symbolic?(e={})[this.property]=this.type.flatten(t[this.property],n):e=this.type.flatten(t[this.property],n),e},unflatten:async function(t,n){if(null==t)return null;let e={};return!0===n.symbolic?e[this.property]=await this.type.unflatten(t[this.property],n):e[this.property]=await this.type.unflatten(t,n),e}})},Map:function(){return e.Type({flatten:function(t,n){if(null==t)return null;if(!0===n.symbolic)return t;let e=[];for(let r in t)e.push(r),e.push(t[r]);return e},unflatten:function(t,n){if(null==t)return null;if(!0===n.symbolic)return t;let e={};for(let r=0;r<t.length;r+=2)e[t[r]]=t[r+1];return e}})}};var r=e;exports.default=r;
},{"./alpha.js":"axtM"}],"RExd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./class.js"));function e(t){return t&&t.__esModule?t:{default:t}}var n=t.default.extend({className:"Flattenable",typeSchema:null,flatten:function(t){return this.typeSchema.flatten(this,t)},unflatten:async function(t,e){return Object.assign(this,await this.typeSchema.unflatten(t,e)),await this.onUnflattened(),this},onUnflattened:async function(){}});exports.default=n;
},{"./class.js":"xPXT"}],"tkuZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("./flattenable.js")),e=s(require("./schema.js")),i=s(require("./alpha.js"));function s(t){return t&&t.__esModule?t:{default:t}}var n=t.default.extend({className:"Collection",itemTypeSchema:null,items:null,__ctor:function(t){t||(t=this.itemTypeSchema),t&&(this.typeSchema=e.default.Property("items").is(e.default.Array().of(t))),this.reset()},onUnflattened:function(){let t=this.items;this.reset();for(let e of t)this.add(e)},reset:function(){return this.items=[],this},clear:function(){var t=this.items;this.reset();for(var e=0;e<t.length;e++)this.onItemRemoved(t[e],0);return this},sort:function(t,e){return"function"!=typeof t?this.items.sort(function(i,s){return(i[t]<=s[t]?-1:1)*(!0===e?-1:1)}):this.items.sort(t),this},findItem:function(t,e){if(!this.items)return null;for(var s=0;s<this.items.length;s++)if((!e||!i.default.partialCompare(this.items[s],e))&&i.default.partialCompare(this.items[s],t))return this.items[s];return null},getItems:function(){return this.items},length:function(){return this.items.length},isEmpty:function(){return!this.items.length},indexOf:function(t){return this.items.indexOf(t)},getAt:function(t,e=!1){return t<0&&1==e&&(t+=this.items.length),t>=0&&t<this.items.length?this.items[t]:null},first:function(){return this.getAt(0)},last:function(){return this.getAt(-1,!0)},addAt:function(t,e){if(!e||!this.onBeforeItemAdded(e))return this;if(t<0&&(t=0),t>this.items.length&&(t=this.items.length),0==t)this.items.unshift(e);else if(t==this.items.length)this.items.push(e);else{var i=this.items.splice(0,t);i.push(e),this.items=i.concat(this.items)}return this.onItemAdded(e),this},unshift:function(t){return this.addAt(0,t)},push:function(t){return this.addAt(this.items.length,t)},add:function(t){return this.push(t)},removeAt:function(t,e=!1){if(t<0&&1==e&&(t+=this.items.length),t<0||t>=this.items.length)return null;var i=this.items[t];return this.items.splice(t,1),this.onItemRemoved(i,t),i},pop:function(t){return this.removeAt(-1,!0)},shift:function(t){return this.removeAt(0)},remove:function(t){return this.removeAt(this.indexOf(t))},forEach:function(t){if(this.isEmpty())return this;for(var e=0;e<this.items.length&&!1!==t(this.items[e],e,this);e++);return this},forEachCall:function(t,...e){if(this.isEmpty())return this;for(var i=0;i<this.items.length&&!1!==this.items[i][t](...e);i++);return this},forEachRev:function(t){if(this.isEmpty())return this;for(var e=this.items.length-1;e>=0&&!1!==t(this.items[e],e,this);e--);return this},forEachRevCall:function(t,...e){if(this.isEmpty())return this;for(var i=this.items.length-1;i>=0&&!1!==this.items[i][t](...e);i--);return this},onBeforeItemAdded:function(t){return!0},onItemAdded:function(t){},onItemRemoved:function(t){}});exports.default=n;
},{"./flattenable.js":"RExd","./schema.js":"xgn1","./alpha.js":"axtM"}],"p9x3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./alpha.js"));function t(e){return e&&e.__esModule?e:{default:e}}let r={strict:!1,parseTemplate:function(t,n,a,l=!1,u=1){let i="string",o=null,f=0,s=0,c="",p=[],g=p,h=!1;function d(t,l){if("template"==t?l=r.parseTemplate(l,n,a,!0,0):"parse"==t?(l=r.parseTemplate(l,n,a,!1,0),t="base-string","array"==e.default.typeOf(l)&&(t=l[0].type,l=l[0].data)):"parse-trim-merge"==t?l=r.parseTemplate(l.trim().split("\n").map(e=>e.trim()).join("\n"),n,a,!1,0):"parse-merge"==t?l=r.parseTemplate(l,n,a,!1,0):"parse-merge-alt"==t&&(l=r.parseTemplate(l,"{","}",!1,0)),"parse-merge"==t||"parse-merge-alt"==t||"parse-trim-merge"==t)for(let e=0;e<l.length;e++)p.push(l[e]);else p.push({type:t,data:l});h&&(g.push(p=[]),h=!1)}!0===l&&(t=t.trim(),i="identifier",f=10,g.push(p=[])),t+="\0";for(let e=0;e<t.length;e++)if("\\"!=t[e]){switch(f){case 0:"\0"==t[e]?o="string":t[e]==n&&"<"==t[e+1]?(f=1,s=1,o="string",i="parse-merge"):t[e]==n&&"@"==t[e+1]?(f=1,s=1,o="string",i="parse-trim-merge",e++):t[e]==n&&":"==t[e+1]?(f=12,s=1,o="string",i="string",e++):t[e]==n?(f=1,s=1,o="string",i="template"):c+=t[e];break;case 1:if("\0"==t[e])throw new Error("Parse error: Unexpected end of template");if(t[e]==a){if(--s<0)throw new Error("Parse error: Unmatched "+a);if(0==s){f=0,o=i;break}}else t[e]==n&&s++;c+=t[e];break;case 10:if("\0"==t[e]){o=i;break}if("."==t[e]){d(i,c),d("access","."),i="identifier",c="";break}if(null!=t[e].match(/[\t\n\r\f\v ]/)){for(o=i,i="identifier",h=!0;null!=t[e].match(/[\t\n\r\f\v ]/);)e++;e--;break}if(t[e]==n&&"<"==t[e+1]){c&&(o=i),f=11,s=1,i="parse-merge";break}if(t[e]==n&&"@"==t[e+1]){c&&(o=i),f=11,s=1,i="parse-trim-merge",e++;break}if('"'==t[e]){c&&(o=i),f=14,s=1,i="parse-merge";break}if("'"==t[e]){c&&(o=i),f=15,s=1,i="parse-merge";break}if("`"==t[e]){c&&(o=i),f=16,s=1,i="parse-merge-alt";break}if(t[e]==n&&":"==t[e+1]){c&&(o=i),f=13,s=1,i="string",e++;break}if(t[e]==n){c&&d(i,c),f=11,s=1,c="",i="parse",c+=t[e];break}"identifier"!=i&&(d(i,c),c="",i="identifier"),c+=t[e];break;case 11:if("\0"==t[e])throw new Error("Parse error: Unexpected end of template");if(t[e]==a){if(--s<0)throw new Error("Parse error: Unmatched "+a);if(0==s&&(f=10,"parse-merge"==i||"parse-merge-alt"==i||"parse-trim-merge"==i))break}else t[e]==n&&s++;c+=t[e];break;case 12:if("\0"==t[e])throw new Error("Parse error: Unexpected end of template");if(t[e]==a){if(--s<0)throw new Error("Parse error: Unmatched "+a);if(0==s){0!=c.length&&"<"!=c[0]&&"["!=c[0]&&" "!=c[0]&&(c=n+c+a),f=0,o=i;break}}else t[e]==n&&s++;c+=t[e];break;case 13:if("\0"==t[e])throw new Error("Parse error: Unexpected end of template");if(t[e]==a){if(--s<0)throw new Error("Parse error: Unmatched "+a);if(0==s){"<"!=c[0]&&"["!=c[0]&&" "!=c[0]&&(c=n+c+a),f=10;break}}else t[e]==n&&s++;c+=t[e];break;case 14:if("\0"==t[e])throw new Error("Parse error: Unexpected end of template");if('"'==t[e]){if(--s<0)throw new Error('Parse error: Unmatched "');if(0==s&&(f=10,"parse-merge"==i||"parse-merge-alt"==i||"parse-trim-merge"==i))break}c+=t[e];break;case 15:if("\0"==t[e])throw new Error("Parse error: Unexpected end of template");if("'"==t[e]){if(--s<0)throw new Error("Parse error: Unmatched '");if(0==s&&(f=10,"parse-merge"==i||"parse-merge-alt"==i||"parse-trim-merge"==i))break}c+=t[e];break;case 16:if("\0"==t[e])throw new Error("Parse error: Unexpected end of template");if("`"==t[e]){if(--s<0)throw new Error("Parse error: Unmatched `");if(0==s&&(f=10,"parse-merge"==i||"parse-merge-alt"==i||"parse-trim-merge"==i))break}c+=t[e]}o&&(d(o,c),o=c="")}else c+="\\",c+=t[++e];if(!l){let e=0;for(;e<g.length&&"string"==g[e].type&&""==g[e].data;)g.splice(e,1);for(e=g.length-1;e>0&&"string"==g[e].type&&""==g[e].data;)g.splice(e--,1);0==g.length&&g.push({type:"string",data:""})}return u&&function e(t){if("object"==typeof t){if(t instanceof Array)for(let r=0;r<t.length;r++)e(t[r]);else t.data=e(t.data);return t}for(let r=0;r<t.length;r++)if("\\"==t[r]){let e=t[r+1];switch(e){case"n":e="\n";break;case"r":e="\r";break;case"f":e="\f";break;case"v":e="\v";break;case"t":e="\t";break;case"s":e="s";break;case'"':e='"';break;case"'":e="'"}t=t.substr(0,r)+e+t.substr(r+2)}return t}(g),g},parse:function(e){return this.parseTemplate(e.trim(),"[","]",!1)},clean:function(e){for(let t=0;t<e.length;t++)"template"!=e[t].type&&(e.splice(t,1),t--);return e},expand:function(t,n,a="text",l="base-string"){let u=[];if("var"==l){let e=!0,a=!1,l=n,i=null,o=!0,f="";for(let u=0;u<t.length&&null!=n;u++)switch(t[u].type){case"identifier":case"string":f+=t[u].data,i=null;break;case"template":f+="object"!=typeof(i=this.expand(t[u].data,l,"arg","template"))?i:"";break;case"base-string":f+=this.expand(t[u].data,l,"arg","base-string"),i=null;break;case"access":if(i&&"object"==typeof i)n=i;else{for(""==f&&(f="this");;)if("!"==f[0])f=f.substr(1),e=!1;else{if("$"!=f[0])break;f=f.substr(1),a=!0}if("this"!=f&&null!=n){let e=n;null===(n=f in n?n[f]:null)&&o&&f in r.functions&&(n=r.functions[f](null,null,e)),o=!1}}f=""}for(;""!=f;)if("!"==f[0])f=f.substr(1),e=!1;else{if("$"!=f[0])break;f=f.substr(1),a=!0}if("this"!=f){let e=!1;if(null!=n?f in n?n=n[f]:(e=!0,n=null):e=!0,e&&1==t.length&&1==r.strict)throw new Error("Expression function `"+f+"` not found.")}"string"==typeof n&&(e&&(n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),a&&(n='"'+n+'"')),u.push(n)}if("varref"==a){let e=n,a=null,l=!0,u="";for(let i=0;i<t.length&&null!=n;i++)switch(t[i].type){case"identifier":case"string":u+=t[i].data,a=null;break;case"template":u+="object"!=typeof(a=this.expand(t[i].data,e,"arg","template"))?a:"";break;case"base-string":u+=this.expand(t[i].data,e,"arg","base-string"),a=null;break;case"access":if(a&&"object"==typeof a)n=a;else{for(""==u&&(u="this");;)if("!"==u[0])u=u.substr(1);else{if("$"!=u[0])break;u=u.substr(1)}if("this"!=u&&null!=n){let e=n;null===(n=u in n?n[u]:null)&&l&&u in r.functions&&(n=r.functions[u](null,null,e)),l=!1}}u=""}for(;""!=u;)if("!"==u[0])u=u.substr(1);else{if("$"!=u[0])break;u=u.substr(1)}return"this"!=u?[n,u]:null}if("fn"==l){var i=[];if(i.push(r.expand(t[0],n,"text","base-string")),"_"+i[0]in r.functions&&(i[0]="_"+i[0]),!(i[0]in r.functions)){if(1==r.strict)throw new Error("Expression function `"+i[0]+"` not found.");return`(Unknown: ${i[0]})`}if("_"==i[0][0])return r.functions[i[0]](t,n);for(let e=1;e<t.length;e++)i.push(r.expand(t[e],n,"arg","base-string"));u.push(r.functions[i[0]](i,t,n))}if("template"==l){if(1==t.length){if(1==t[0].length&&"string"==t[0][0].type)return t[0][0].data;if(1==t[0].length&&"identifier"==t[0][0].type){let e=t[0][0].data;if(e in r.functions||"_"+e in r.functions)return r.expand(t,n,a,"fn")}return r.expand(t[0],n,a,"var")}return r.expand(t,n,a,"fn")}if("base-string"==l){let e=-1;for(let l of t){let i=null;switch(e++,l.type){case"template":i=r.expand(l.data,n,a,"template");break;case"string":case"identifier":i=l.data;break;case"base-string":i=r.expand(l.data,n,a,"base-string")}"void"!=a&&("last"==a&&e!=t.length-1||u.push(i))}}if("obj"==a)return u;if("last"==a)return"Rose\\Arry"==typeOf(u)&&(u=u[0]),u;if("void"==a)return null;if("arg"==a)return"array"==e.default.typeOf(u)?1!=u.length?u.join(""):u[0]:u;if("text"==a&&"array"==e.default.typeOf(u)){let e=t=>null!=t&&"object"==typeof t?"map"in t?t.map(e).join(""):"join"in t?t.join(""):t.toString():t;u=u.map(e).join("")}return u},compile:function(e){return e=r.parse(e),function(t=null,n="text"){return r.expand(e,t||{},n)}},eval:function(e,t=null,n="text"){return e=r.parse(e),r.expand(e,t||{},n)},value:function(t,n=null){return"array"!=e.default.typeOf(t)?t:r.expand(t,n||{},"arg")},register:function(e,t){r.functions[e]=t},call:function(e,t,n=null){return e in r.functions?r.functions[e](t,null,n):null},getNamedValues:function(e,t,n=1,a=!0){let l={},u=0;for(;n<e.length;n+=2){let i=r.expand(e[n],t,"arg");u||(u=i.startsWith(":")?1:i.endsWith(":")?2:3),1==u?i=i.substr(1):2==u&&(i=i.substr(0,i.length-1)),l[i]=a?r.expand(e[n+1],t,"arg"):e[n+1]}return l}};r.functions={null:function(e){return null},true:function(e){return!0},false:function(e){return!1},len:function(e){return e[1].toString().length},int:function(e){return~~e[1]},str:function(e){return e[1].toString()},float:function(e){return parseFloat(e[1])},chr:function(e){return String.fromCharCode(e[1])},ord:function(e){return e[1].toString().charCodeAt(0)},not:function(e){return!e[1]},neg:function(e){return-e[1]},abs:function(e){return Math.abs(e[1])},and:function(e){for(let t=1;t<e.length;t++)if(!e[t])return!1;return!0},or:function(e){for(let t=1;t<e.length;t++)if(~~e[t])return!0;return!1},eq:function(e){return e[1]==e[2]},ne:function(e){return e[1]!=e[2]},lt:function(e){return e[1]<e[2]},le:function(e){return e[1]<=e[2]},gt:function(e){return e[1]>e[2]},ge:function(e){return e[1]>=e[2]},isnotnull:function(e){return!!e[1]},isnull:function(e){return!e[1]},iszero:function(e){return 0==parseInt(e[1])},"eq?":function(e){return e[1]==e[2]},"ne?":function(e){return e[1]!=e[2]},"lt?":function(e){return e[1]<e[2]},"le?":function(e){return e[1]<=e[2]},"gt?":function(e){return e[1]>e[2]},"ge?":function(e){return e[1]>=e[2]},"notnull?":function(e){return!!e[1]},"null?":function(e){return!e[1]},"zero?":function(e){return 0==parseInt(e[1])},typeof:function(t){return e.default.typeOf(t[1])},"*":function(e){let t=e[1];for(let r=2;r<e.length;r++)t*=e[r];return t},"/":function(e){let t=e[1];for(let r=2;r<e.length;r++)t/=e[r];return t},"+":function(e){let t=e[1];for(let r=2;r<e.length;r++)t-=-e[r];return t},"-":function(e){let t=e[1];for(let r=2;r<e.length;r++)t-=e[r];return t},mul:function(e){let t=e[1];for(let r=2;r<e.length;r++)t*=e[r];return t},div:function(e){let t=e[1];for(let r=2;r<e.length;r++)t/=e[r];return t},sum:function(e){let t=e[1];for(let r=2;r<e.length;r++)t-=-e[r];return t},sub:function(e){let t=e[1];for(let r=2;r<e.length;r++)t-=e[r];return t},mod:function(e){let t=e[1];for(let r=2;r<e.length;r++)t%=e[r];return t},pow:function(e){let t=e[1];for(let r=2;r<e.length;r++)t=Math.pow(t,e[r]);return t},json:function(e){return JSON.stringify(e[1])},_set:function(e,t){for(let n=1;n+1<e.length;n+=2){let a=r.value(e[n+1],t);if(e[n].length>1){let l=r.expand(e[n],t,"varref");null!=l&&(l[0][l[1]]=a)}else t[r.value(e[n],t)]=a}return""},_unset:function(e,t){for(let n=1;n<e.length;n++)if(e[n].length>1){let a=r.expand(e[n],t,"varref");null!=a&&delete a[0][a[1]]}else delete t[r.value(e[n],t)];return null},trim:function(e){return e[1]?"object"==typeof e[1]?e[1].map(e=>e.trim()):e[1].trim():""},upper:function(e){return e[1]?"object"==typeof e[1]?e[1].map(e=>e.toUpperCase()):e[1].toUpperCase():""},lower:function(e){return e[1]?"object"==typeof e[1]?e[1].map(e=>e.toLowerCase()):e[1].toLowerCase():""},substr:function(e){let t=e[e.length-1].toString(),r=0,n=null;return 4==e.length?(r=~~e[1],n=~~e[2]):(r=~~e[1],n=null),r<0&&(r+=t.length),n<0&&(n+=t.length),null===n&&(n=t.length-r),t.substr(r,n)},replace:function(e){return e[3].split(e[1]).join(e[2])},nl2br:function(e){return e[1]?"object"==typeof e[1]?e[1].map(e=>e.replace(/\n/g,"<br/>")):e[1].replace(/\n/g,"<br/>"):""},"%":function(t){t.shift();var r=t.shift();let n="";for(let a=0;a<t.length;a++)if("array"==e.default.typeOf(t[a])){n+=`<${r}>`;for(let e=0;e<t[a].length;e++)n+=t[a][e];n+=`</${r}>`}else n+=`<${r}>${t[a]}</${r}>`;return n},"%%":function(e){e.shift();var t=e.shift();let r="",n="";for(let a=0;a<e.length;a+=2)a+1<e.length?r+=` ${e[a]}="${e[a+1]}"`:n=e[a];return n?`<${t}${r}>${n}</${t}>`:`<${t}${r}/>`},join:function(t){return t[2]&&"array"==e.default.typeOf(t[2])?t[2].join(t[1]):""},split:function(e){return e[2]&&"string"==typeof e[2]?e[2].split(e[1]):[]},keys:function(e){return e[1]&&"object"==typeof e[1]?Object.keys(e[1]):[]},values:function(e){return e[1]&&"object"==typeof e[1]?Object.values(e[1]):[]},_each:function(e,t){let n=r.expand(e[1],t,"arg"),a=r.expand(e[2],t,"arg"),l=[],u=0;if(!a)return l;for(let i in a)t[n]=a[i],t[n+"##"]=u++,t[n+"#"]=i,l.push(r.expand(e[3],t,"text"));return delete t[n],delete t[n+"##"],delete t[n+"#"],l},_foreach:function(e,t){let n=r.expand(e[1],t,"arg"),a=r.expand(e[2],t,"arg"),l=0;if(!a)return null;for(let u in a)t[n]=a[u],t[n+"##"]=l++,t[n+"#"]=u,r.expand(e[3],t,"text");return delete t[n],delete t[n+"##"],delete t[n+"#"],null},"_?":function(e,t){return r.expand(e[1],t,"arg")?r.expand(e[2],t,"arg"):e.length>3?r.expand(e[3],t,"arg"):""},"_??":function(e,t){let n=r.expand(e[1],t,"arg");return n||r.expand(e[2],t,"arg")},_if:function(e,t){for(let n=0;n<e.length;n+=3){if("else"==r.expand(e[n],t,"arg"))return r.expand(e[n+1],t,"text");if(r.expand(e[n+1],t,"arg"))return r.expand(e[n+2],t,"text")}return""},_switch:function(e,t){let n=r.expand(e[1],t,"arg");for(let a=2;a<e.length;a+=2){let l=r.expand(e[a],t,"arg");if(l==n||"default"==l)return r.expand(e[a+1],t,"text")}return""},_break:function(e,t){throw new Error("EXC_BREAK")},_continue:function(e,t){throw new Error("EXC_CONTINUE")},_repeat:function(e,t){if(e.length<3||1!=(1&e.length))return"(`repeat`: Wrong number of parameters)";let n=r.value(e[1],t),a=null,l=0,u=null,i=null;for(let c=2;c<e.length-1;c+=2){switch(r.value(e[c],t).toLowerCase()){case"from":l=parseFloat(r.value(e[c+1],t));break;case"to":u=parseFloat(r.value(e[c+1],t));break;case"count":a=parseFloat(r.value(e[c+1],t));break;case"step":i=parseFloat(r.value(e[c+1],t))}}let o=e[e.length-1],f=[];if(null!==u)if(null===i&&(i=l>u?-1:1),i<0)for(let c=l;c>=u;c+=i)try{t[n]=c,f.push(r.value(o,t))}catch(s){let e=s.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw s}else for(let c=l;c<=u;c+=i)try{t[n]=c,f.push(r.value(o,t))}catch(s){let e=s.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw s}else if(null!==a){null===i&&(i=1);for(let e=l;a>0;a--,e+=i)try{t[n]=e,f.push(r.value(o,t))}catch(s){let e=s.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw s}}else{null===i&&(i=1);for(let e=l;;e+=i)try{t[n]=e,f.push(r.value(o,t))}catch(s){let e=s.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw s}}return delete t[n],f},_for:function(e,t){if(e.length<3||1!=(1&e.length))return"(`for`: Wrong number of parameters)";let n=r.value(e[1],t),a=null,l=0;to=null;let u=null;for(let f=2;f<e.length-1;f+=2)switch(value=r.value(e[f],t),value.toLowerCase()){case"from":l=parseFloat(r.value(e[f+1],t));break;case"to":to=parseFloat(r.value(e[f+1],t));break;case"count":a=parseFloat(r.value(e[f+1],t));break;case"step":u=parseFloat(r.value(e[f+1],t))}let i=e[e.length-1];if(null!==to)if(null===u&&(u=l>to?-1:1),u<0)for(let f=l;f>=to;f+=u)try{t[n]=f,r.value(i,t)}catch(o){let e=o.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw o}else for(let f=l;f<=to;f+=u)try{t[n]=f,r.value(i,t)}catch(o){let e=o.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw o}else if(null!==a){null===u&&(u=1);for(let e=l;a>0;a--,e+=u)try{t[n]=e,r.value(i,t)}catch(o){let e=o.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw o}}else{null===u&&(u=1);for(let e=l;;e+=u)try{t[n]=e,r.value(i,t)}catch(o){let e=o.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw o}}return delete t[n],null},_loop:function(e,t){if(e.length<2)return"(`loop`: Wrong number of parameters)";let n=e[1];for(;;)try{r.value(n,t)}catch(a){let e=a.message;if("EXC_BREAK"==e)break;if("EXC_CONTINUE"==e)continue;throw a}return null},_echo:function(e,t){let n="";for(let a=1;a<e.length;a++)n+=r.expand(e[a],t,"arg");return console.log(n),""},"_#":function(e,t){let n=[];for(let a=1;a<e.length;a++)n.push(r.expand(e[a],t,"arg"));return n},"_##":function(e,t){let r=[];for(let n=1;n<e.length;n++)r.push(e[n]);return r},"_&":function(e,t){return r.getNamedValues(e,t,1,!0)},"_&&":function(e,t){return r.getNamedValues(e,t,1,!1)},contains:function(e,t,r){let n=e[1];if("object"!=typeof n)return r.err="Argument is not a Map",!1;let a="";for(let l=2;l<e.length;l++)e[l]in n||(a+=", "+e[l]);return""==a||(r.err=a.substr(1),!1)},has:function(t,r,n){let a=t[2];return"object"==e.default.typeOf(a)&&t[1]in a},_map:function(t,n){let a=r.expand(t[1],n,"arg"),l=r.expand(t[2],n,"arg");if(!l)return l;let u="array"==e.default.typeOf(l),i=u?[]:{},o=0;for(let e in l)n[a]=l[e],n[a+"##"]=o++,n[a+"#"]=e,u?i.push(r.expand(t[3],n,"arg")):i[e]=r.expand(t[3],n,"arg");return delete n[a],delete n[a+"##"],delete n[a+"#"],i},_filter:function(t,n){let a=r.expand(t[1],n,"arg"),l=r.expand(t[2],n,"arg");if(!l)return l;let u="array"==e.default.typeOf(l),i=u?[]:{},o=0;for(let e in l)n[a]=l[e],n[a+"##"]=o++,n[a+"#"]=e,~~r.expand(t[3],n,"arg")&&(u?i.push(l[e]):i[e]=l[e]);return delete n[a],delete n[a+"##"],delete n[a+"#"],i},expand:function(e,t,n){return r.expand(r.parseTemplate(e[1],"{","}"),3==e.length?e[2]:n)},_call:function(e,t){let n=r.expand(e[1],t,"varref");if(!n||"function"!=typeof n[0][n[1]])throw new Error("Expression is not a function: "+r.expand(e[1],t,"obj").map(e=>null==e?".":e).join(""));let a=[];for(let l=2;l<e.length;l++)a.push(r.value(e[l],t));return n[0][n[1]](...a)}};var n=r;exports.default=n;
},{"./alpha.js":"axtM"}],"OHwo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Template=exports.Collection=exports.Flattenable=exports.Schema=exports.ModelList=exports.Model=exports.EventDispatcher=exports.Event=exports.Class=exports.Rin=void 0;var e=i(require("./alpha.js")),t=i(require("./class.js")),s=i(require("./event.js")),r=i(require("./event-dispatcher.js")),o=i(require("./model.js")),l=i(require("./model-list.js")),a=i(require("./schema.js")),p=i(require("./flattenable.js")),n=i(require("./collection.js")),u=i(require("./template.js"));function i(e){return e&&e.__esModule?e:{default:e}}const c=e.default;exports.Rin=c;const d=t.default;exports.Class=d;const x=s.default;exports.Event=x;const f=r.default;exports.EventDispatcher=f;const j=o.default;exports.Model=j;const q=l.default;exports.ModelList=q;const v=a.default;exports.Schema=v;const m=p.default;exports.Flattenable=m;const h=n.default;exports.Collection=h;const M=u.default;exports.Template=M;
},{"./alpha.js":"axtM","./class.js":"xPXT","./event.js":"K4NB","./event-dispatcher.js":"aK92","./model.js":"rbeK","./model-list.js":"J25A","./schema.js":"xgn1","./flattenable.js":"RExd","./collection.js":"tkuZ","./template.js":"p9x3"}],"hPM2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@rsthn/rin");const e={Route:t.EventDispatcher.extend({routeRegex:null,value:null,params:null,args:null,s_args:null,active:!1,changed:!1,__ctor:function(t){this._super.EventDispatcher.__ctor(),this._compileRoute(this.value=t)},_compileRoute:function(t){for(this.params=[],t=t.replace(/\/\*\//g,"/.+/");;){var e=/:([!@A-Za-z0-9_-]+)/.exec(t);if(!e)break;t=t.replace(e[0],"([^/]+)"),this.params.push(e[1])}this.routeRegex="^"+t.replace(/##/g,"")},addHandler:function(t,e){this.addEventListener((!0===e?"un":"")+"routed",t,null)},removeHandler:function(t,e){this.removeEventListener((!0===e?"un":"")+"routed",t,null)},dispatch:function(t){var e=t.match(this.routeRegex);if(!e)return this.s_args=null,this.active&&this.dispatchEvent("unrouted",{route:this}),void(this.active=!1);for(var s={route:this},i="",r=0;r<this.params.length;r++)s[this.params[r]]=e[r+1],i+="_"+e[r+1];this.changed=i!=this.s_args,this.s_args=i,this.dispatchEvent("routed",this.args=s),this.active=!0}}),routes:{},sortedRoutes:[],ignoreHashChangeEvent:0,location:"",args:[],init:function(){this.alreadyAttached||(this.alreadyAttached=!0,"onhashchange"in globalThis&&(globalThis.onhashchange=this.onLocationChanged.bind(this)))},refresh:function(){this.onLocationChanged()},setRoute:function(t,e){var s=this.realLocation(t);s!=this.location&&(e&&this.ignoreHashChangeEvent++,globalThis.location.hash=s)},addRoute:function(t,e,s){return this.routes[t]||(this.routes[t]=new this.Route(t),this.sortedRoutes.push(t),this.sortedRoutes.sort((t,e)=>this.routes[t].routeRegex.length-this.routes[e].routeRegex.length)),void 0!==s?(this.routes[t].addHandler(e,!1),this.routes[t].addHandler(s,!0)):this.routes[t].addHandler(e,!1),this.routes[t]},addRoutes:function(t){for(var e in t)this.routes[e]||(this.routes[e]=new this.Route(e),this.sortedRoutes.push(e)),this.routes[e].addHandler(t[e],!1);this.sortedRoutes.sort((t,e)=>this.routes[t].routeRegex.length-this.routes[e].routeRegex.length)},removeRoute:function(t,e,s){this.routes[t]&&(void 0!==s?(this.routes[t].removeHandler(e,!1),this.routes[t].removeHandler(s,!0)):this.routes[t].removeHandler(e))},removeRoutes:function(t){for(var e in t)this.routes[e]&&this.routes[e].removeHandler(t[e])},realLocation:function(t,e){e||(e=this.location),e||(e=" ");for(var s,i=0,r=0,o=0,a="";-1!=i&&r<t.length&&o<e.length;)switch(i){case 0:if("*"==t.substr(r++,1)){i=1;break}if(t.substr(r-1,1)!=e.substr(o++,1)){a+=t.substr(r-1),i=-1;break}a+=e.substr(o-1,1);break;case 1:if("*"==t.substr(r,1)){i=3,r++;break}i=2;break;case 2:if(-1==(s=e.indexOf(t.substr(r,1),o))){a+=e.substr(o)+t.substr(r),i=-1;break}a+=e.substr(o,s-o),i=0,o=s;break;case 3:if(-1==(s=e.lastIndexOf(t.substr(r,1)))){a+=t.substr(r),i=-1;break}a+=e.substr(o,s-o),i=0,o=s}return-1!=i&&(a+=t.substr(r)),a.trim()},onLocationChanged:function(){var t=location.hash.substr(1),e=this.realLocation(t);if(t==e)if(this.location=t,this.args=this.location.split("/"),this.ignoreHashChangeEvent>0)this.ignoreHashChangeEvent--;else for(var s=0;s<this.sortedRoutes.length;s++)this.routes[this.sortedRoutes[s]].dispatch(this.location);else globalThis.location.replace("#"+e)},navigate:function(t,e=!1){t=this.realLocation(t),globalThis.location.hash!="#"+t?e?globalThis.location.replace("#"+t):globalThis.location.hash=t:this.refresh()}};e.init();var s=e;exports.default=s;
},{"@rsthn/rin":"OHwo"}],"yFRv":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@rsthn/rin");const i={},s={},n={eid:null,isRoot:!0,root:null,isReady:0,refs:null,modelt:e.Model,model:null,events:{"click [data-action]":function(t){let e=t.source.dataset.action.split(" ");e[0]in this?this[e[0]]({...t.source.dataset,...e,length:e.length},t):t.continuePropagation=!0},"keyup(13) input[data-enter]":function(t){let e=t.source.dataset.enter.split(" ");e[0]in this?this[e[0]]({...t.source.dataset,...e,length:e.length},t):t.continuePropagation=!0}},__ctor:function(){if(this._list_watch=[],this._list_visible=[],this._list_property=[],"root"in this.dataset&&"false"==this.dataset.root&&(this.isRoot=!1),this.style.display="block",this.refs={},this.eid=Math.random().toString().substr(2),null!=this.model){let t=this.model;this.model=null,this.setModel(t,!1)}this._mutationObserver=!0,Object.keys(this._super).reverse().forEach(t=>{"init"in this._super[t]&&this._super[t].init()}),this.init(),this.events&&this.bindEvents(this.events);const t=()=>{if(this.isReady=1,"model"in this.dataset){let t=this.getFieldByPath(this.dataset.model);t&&this.setModel(t)}Object.keys(this._super).reverse().forEach(t=>{"ready"in this._super[t]&&this._super[t].ready()}),this.ready(),this.collectWatchers();let t=this.findCustomParent(this);return t&&(t._mutationHandler?t._mutationHandler():2==t.isReady&&(this.rready(),this.isReady=2)),t};let e=null;this._mutationHandler=(()=>{if(0==this.childNodes.length)return;let i=!0;this.querySelectorAll("[data-_custom]").forEach(t=>{this.findCustomParent(t)===this&&(t.isReady||(i=!1))}),i&&(e&&clearTimeout(e),e=setTimeout(()=>{e=null;let i=!0,s=[];if(this.querySelectorAll("[data-_custom]").forEach(t=>{this.findCustomParent(t)===this&&(t.isReady||(i=!1),2!=t.isReady&&s.push(t))}),!i)return;for(let t of this.querySelectorAll("[data-_pending=true]")){this.findRoot(t.parentElement)===this&&("true"!=t.dataset._linked&&(this[t.dataset.ref]=t,this.refs[t.dataset.ref]=t,t.connectReference(this)))}this._mutationHandler=null,this._mutationObserver.disconnect(),this._mutationObserver=null;let n=t();for(let t of s)t.rready(),t.isReady=2;n||(this.isReady=2,this.rready())},50))}),this._mutationObserver=new MutationObserver(this._mutationHandler),this._mutationObserver.observe(this,{attributes:!1,childList:!0,subtree:!1}),this._mutationHandler()},init:function(){},ready:function(){},rready:function(){},getFieldByPath:function(e){if(!e)return null;let i=e.split("."),s=t;for(i.length&&"this"==i[0]&&(s=this,i.shift());null!=s&&0!=i.length;)s=s[i.shift()];return s},getRoot:function(){return this.root?this.root:this.root=this.findRoot()},setModel:function(t,i=!0){return t?(t=e.Rin.ensureTypeOf(this.modelt,t),this.model!==t&&(null!=this.model&&(this.model.removeEventListener(this.eid+":modelChanged",this.onModelPreChanged,this),this.model.removeEventListener(this.eid+":propertyChanging",this.onModelPropertyChanging,this),this.model.removeEventListener(this.eid+":propertyChanged",this.onModelPropertyPreChanged,this),this.model.removeEventListener(this.eid+":propertyRemoved",this.onModelPropertyRemoved,this)),this.model=t,this.model.addEventListener(this.eid+":modelChanged",this.onModelPreChanged,this),this.model.addEventListener(this.eid+":propertyChanging",this.onModelPropertyChanging,this),this.model.addEventListener(this.eid+":propertyChanged",this.onModelPropertyPreChanged,this),this.model.addEventListener(this.eid+":propertyRemoved",this.onModelPropertyRemoved,this)),!1!==i&&this.model.setNamespace(this.eid).update(!0).setNamespace(null),this):this},getModel:function(){return this.model},addClass:function(t){return t?(t.split(" ").forEach(t=>{(t=t.trim())&&("-"==t[0]||"+"==t[0]?this.classList["-"==t[0]?"remove":"add"](t.substr(1)):this.classList.add(t))}),this):this},removeClass:function(t){return t?(t.split(" ").forEach(t=>{(t=t.trim())&&("-"==t[0]||"+"==t[0]?this.classList["-"==t[0]?"remove":"add"](t.substr(1)):this.classList.remove(t))}),this):this},setStyle:function(t){return t?(t.split(";").forEach(t=>{let e=(t=t.trim()).indexOf(":");if(-1==e)return;let i=t.substr(0,e).trim();for(let s=i.indexOf("-");-1!=s;s=i.indexOf("-"))i=i.substr(0,s)+i.substr(s+1,1).toUpperCase()+i.substr(s+2);this.style[i]=t.substr(e+1).trim()}),this):this},getWidth:function(t=null){return(t||this).getBoundingClientRect().width},getHeight:function(t=null){return(t||this).getBoundingClientRect().height},bindEvents:function(t){for(var i in t){let l=t[i];"string"==e.Rin.typeOf(l)&&(l=this[l]),l=l.bind(this);var s=i.indexOf(" "),n=-1==s?i:i.substr(0,s),r=-1==s?"":i.substr(s+1);let a=null;var o=n.indexOf("(");if(-1!=o&&(a=n.substr(o+1,n.length-o-2).split(","),n=n.substr(0,o)),"@"==r.substr(0,1)){if("this"!=r.substr(1)){this[r.substr(1)].addEventListener(n,l);continue}r=this}if("#"!=n.substr(0,1)){if(null!=a)switch(n){case"keyup":case"keydown":this.listen(n,r,function(t){if(-1!=e.Rin.indexOf(a,t.keyCode.toString()))return l(t,a);t.continuePropagation=!0});continue}this.listen(n,r,l)}else this.listen("propertyChanged."+n.substr(1),this,l)}return this},_eventHandler:function(t,i,s){if(!1!==t.continuePropagation){if(t.continuePropagation=!0,t.source=t.target,i&&i instanceof HTMLElement)t.source===i&&(t.continuePropagation=!1,!0===s.call(this,t,t.detail)&&(t.continuePropagation=!0));else if(i&&"*"!=i){let n=this.querySelectorAll(i);for(;t.source!==this;){if(-1!==e.Rin.indexOf(n,t.source,!0)){t.continuePropagation=!1,!0===s.call(this,t,t.detail)&&(t.continuePropagation=!0);break}t.source=t.source.parentElement}}else t.continuePropagation=!1,!0===s.call(this,t,t.detail)&&(t.continuePropagation=!0);!1===t.continuePropagation&&(t.preventDefault(),t.stopPropagation())}},listen:function(t,i,s){let n=!1;"function"==e.Rin.typeOf(i)&&(s=i,i=null),"!"==t[t.length-1]&&(t=t.substr(0,t.length-1),n=!0);let r=null,o=null,l=this;return this.addEventListener(t,r=(t=>{!1!==t.continuePropagation&&(t.firstCapture||(t.firstCapture=this,t.firstCaptureCount=0,t.queue=[]),t.firstCapture===this&&t.firstCaptureCount++,1!=n||t.queue.push([this,i,s]))}),!0),this.addEventListener(t,o=(t=>{if(!1!==t.continuePropagation&&(1!=n&&this._eventHandler(t,i,s),t.firstCapture===this&&!1!==t.continuePropagation&&0==--t.firstCaptureCount)){for(;t.queue.length;){let e=t.queue.pop();e[0]._eventHandler(t,e[1],e[2])}t.continuePropagation=!1}}),!1),{removed:!1,remove:function(){this.removed||(this.removed=!0,l.removeEventListener(t,r,!0),l.removeEventListener(t,o,!1))}}},dispatch:function(t,e=null,i=!0){this.dispatchEvent(new CustomEvent(t,{bubbles:i,detail:e}))},dispatchOn:function(t,e,i=null,s=!0){t.dispatchEvent(new CustomEvent(e,{bubbles:s,detail:i}))},setInnerHTML:function(t){if(null==this._mutationObserver){let t=null;this._mutationHandler=(()=>{if(0==this.childNodes.length)return;let e=!0;this.querySelectorAll("[data-_custom]").forEach(t=>{this.findCustomParent(t)===this&&(t.isReady||(e=!1))}),e&&(t&&clearTimeout(t),t=setTimeout(()=>{t=null;let e=!0,i=[];if(this.querySelectorAll("[data-_custom]").forEach(t=>{this.findCustomParent(t)===this&&(t.isReady||(e=!1),2!=t.isReady&&i.push(t))}),e){this._mutationHandler=null,this._mutationObserver.disconnect(),this._mutationObserver=null;for(let t of i)t.rready(),t.isReady=2;this.collectWatchers()}},50))}),this._mutationObserver=new MutationObserver(this._mutationHandler),this._mutationObserver.observe(this,{attributes:!1,childList:!0,subtree:!1})}this.innerHTML=t},collectWatchers:function(){let t,i=this,s=!1,n=this._list_watch.length,r=this._list_visible.length,o=this._list_property.length;t=this.querySelectorAll("[data-watch]");for(let l=0;l<t.length;l++){for(let e of t[l].querySelectorAll(".pseudo"))e.remove();t[l]._template=e.Template.compile(t[l].innerHTML),t[l]._watch=new RegExp("^("+t[l].dataset.watch+")$"),t[l].innerHTML="",t[l].removeAttribute("data-watch"),this._list_watch.push(t[l])}if("selfWatch"in this.dataset){for(let t of this.querySelectorAll(".pseudo"))t.remove();this._template=e.Template.compile(this.innerHTML),this._watch=new RegExp("^("+this.dataset.selfWatch+")$"),this.innerHTML="",this.removeAttribute("data-self-watch"),this._list_watch.push(this)}t=this.querySelectorAll("[data-visible]");for(let l=0;l<t.length;l++)t[l]._visible=e.Template.compile(t[l].dataset.visible),t[l].removeAttribute("data-visible"),this._list_visible.push(t[l]);"selfVisible"in this.dataset&&(this._visible=e.Template.compile(this.dataset.selfVisible),this.removeAttribute("data-self-visible"),this._list_visible.push(this)),t=this.querySelectorAll("[data-property]");for(let e=0;e<t.length;e++)t[e].onchange=t[e].onblur=function(){switch(this.type){case"radio":this.checked&&i.getModel().set(this.name,this.value);break;case"checkbox":i.getModel().set(this.name,this.checked?"1":"0");break;case"field":i.getModel().set(this.name,this.getValue());break;default:i.getModel().set(this.name,this.value)}},"SELECT"==t[e].tagName&&(t[e].onmouseup=function(){i.getModel().set(this.name,this.value)}),t[e].name=t[e].dataset.property,t[e].removeAttribute("data-property"),this._list_property.push(t[e]);"selfProperty"in this.dataset&&(this.onchange=this.onblur=function(){switch(this.type){case"radio":this.checked&&i.getModel().set(this.name,this.value);break;case"checkbox":i.getModel().set(this.name,this.checked?"1":"0");break;case"field":i.getModel().set(this.name,this.getValue());break;default:i.getModel().set(this.name,this.value)}},"SELECT"==this.tagName&&(this.onmouseup=function(){i.getModel().set(this.name,this.value)}),this.name=this.dataset.selfProperty,this.removeAttribute("data-self-property"),this._list_property.push(this)),this._list_watch=this._list_watch.filter(t=>null!=t.parentElement),n!=this._list_watch.length&&(s=!0),this._list_visible=this._list_visible.filter(t=>null!=t.parentElement),r!=this._list_visible.length&&(s=!0),this._list_property=this._list_property.filter(t=>null!=t.parentElement),o!=this._list_property.length&&(s=!0),null!=this.model&&s&&this.model.setNamespace(this.eid).update(!0).setNamespace(null)},onCreated:function(){},onConnected:function(){},onDisconnected:function(){},onRefAdded:function(t){},onRefRemoved:function(t){},onModelPreChanged:function(t,e){let i=this.getModel().get();for(let s=0;s<this._list_watch.length;s++)for(let t of e.fields)if(this._list_watch[s]._watch.test(t)){this._list_watch[s].innerHTML=this._list_watch[s]._template(i);break}for(let s=0;s<this._list_visible.length;s++)this._list_visible[s]._visible(i,"arg")?this._list_visible[s].style.removeProperty("display"):this._list_visible[s].style.display="none";this.onModelChanged(t,e)},onModelChanged:function(t,e){},onModelPropertyChanging:function(t,e){},onModelPropertyPreChanged:function(t,e){for(let i=0;i<this._list_property.length;i++)if(this._list_property[i].name==e.name){let t=!0;switch(this._list_property[i].type){case"radio":if(this._list_property[i].value!=e.value){this._list_property[i].parentElement.classList.remove("active");continue}this._list_property[i].checked=!0,this._list_property[i].parentElement.classList.add("active");break;case"checkbox":~~e.value?(this._list_property[i].checked=!0,this._list_property[i].parentElement.classList.add("active")):(this._list_property[i].checked=!1,this._list_property[i].parentElement.classList.remove("active"));break;case"field":this._list_property[i].val=this._list_property[i].dataset.value=e.value,this._list_property[i].setValue(e.value),t=!1;break;default:this._list_property[i].value=e.value,this._list_property[i].val=this._list_property[i].dataset.value=e.value,this._list_property[i].value!=e.value&&(t=!1)}t&&this._list_property[i].onchange&&this._list_property[i].onchange()}this.dispatch("propertyChanged."+e.name,e,!1),this.dispatch("propertyChanged",e,!1),this.onModelPropertyChanged(t,e)},onModelPropertyChanged:function(t,e){},onModelPropertyRemoved:function(t,e){},preparePrototype:function(t){if(!0!==t.__prototypePrepared){t.__prototypePrepared=!0,"events"in t||(t.events={});for(let e in t)e.startsWith("event ")&&(t.events[e.substr(6)]=t[e],delete t[e])}},register:function(t,...r){const o=class extends HTMLElement{constructor(){super(),this.invokeConstructor=!0,this._super={};for(let t of Object.entries(this.constructor.prototype._super)){this._super[t[0]]={};for(let e of Object.entries(t[1]))this._super[t[0]][e[0]]=e[1].bind(this)}this.onCreated()}findRoot(t){let e=t||this.parentElement;for(;null!=e;){if("isRoot"in e&&1==e.isRoot)return e;e=e.parentElement}return null}findCustomParent(t){let e=t?t.parentElement:this.parentElement;for(;null!=e;){if("true"==e.dataset._custom)return e;e=e.parentElement}return null}connectReference(t=null,e=255){this.root||1!=(1&e)||(null==t&&(t=this.findRoot()),null!=t?(this.dataset.ref&&(t[this.dataset.ref]=this,t.refs[this.dataset.ref]=this),delete this.dataset._pending,this.dataset._linked="true",this.root=t):this.dataset._pending="true"),this.root&&2==(2&e)&&this.dataset.ref&&this.root.onRefAdded(this.dataset.ref)}connectedCallback(){this.connectReference(null,1),this.invokeConstructor&&(this.invokeConstructor=!1,this.dataset._custom="true",this.__ctor()),this.connectReference(null,2),this.onConnected(),this.dataset.xref&&(globalThis[this.dataset.xref]=this)}disconnectedCallback(){this.root&&(this.dataset.ref&&(this.root.onRefRemoved(this.dataset.ref),delete this.root[this.dataset.ref],delete this.root.refs[this.dataset.ref]),delete this.dataset._pending,this.dataset._linked="false",this.root=null),this.onDisconnected(),this.dataset.xref&&delete globalThis[this.dataset.xref]}};e.Rin.override(o.prototype,n);const l={},a={},h=e.Rin.clone(n.events);let u,d=!0,p=!0,c=!0;for(let s=0;s<r.length;s++)if(r[s]){if("string"==e.Rin.typeOf(r[s])){const t=r[s];if(r[s]=i[t],!r[s])continue;a[t]={};for(let i in r[s])"function"==e.Rin.typeOf(r[s][i])&&(a[t][i]=r[s][i]);d=!1,p=!1,c=!1,u=!1}else n.preparePrototype(r[s]),u=!0;"_super"in r[s]&&e.Rin.override(a,r[s]._super),"events"in r[s]&&e.Rin.override(h,r[s].events),e.Rin.override(o.prototype,r[s]),e.Rin.override(l,r[s]),u&&(!d&&"init"in r[s]&&(d=!0),!p&&"ready"in r[s]&&(p=!0),!c&&"rready"in r[s]&&(c=!0))}let f=function(){};return d||(o.prototype.init=f,l.init=f),p||(o.prototype.ready=f,l.ready=f),c||(o.prototype.rready=f,l.rready=f),o.prototype._super=a,o.prototype.events=h,l._super=a,l.events=h,customElements.define(t,o),i[t]=l,s[t]=o,o},expand:function(t,...r){if(!(t in i))return;const o=i[t],l=s[t],a=o._super,h=o.events;for(let i of r)n.preparePrototype(i),"_super"in i&&e.Rin.override(a,i._super),"events"in i&&e.Rin.override(h,i.events),e.Rin.override(l.prototype,i),e.Rin.override(o,i);l.prototype._super=a,l.prototype.events=h,o._super=a,o.events=h},hookAppend:function(t,n,r){if(!(t in i))return;let o=e.Rin.hookAppend(i[t],n,r),l=e.Rin.hookAppend(s[t].prototype,n,r);return{unhook:function(){o.unhook(),l.unhook()}}},hookPrepend:function(t,n,r){if(!(t in i))return;let o=e.Rin.hookPrepend(i[t],n,r),l=e.Rin.hookPrepend(s[t].prototype,n,r);return{unhook:function(){o.unhook(),l.unhook()}}},":toggleClass":function(t,e){let i=e.source;"2"in t&&(i=document.querySelector(t[2])),i&&(i.classList.contains(t[1])?i.classList.remove(t[1]):i.classList.add(t[1]))}};n.register("r-elem",{}),HTMLElement.prototype.querySelectorParent=function(t){let e=this;for(;null!=e&&!e.matches(t);)e=e.parentElement;return e};var r=n;exports.default=r;
},{"@rsthn/rin":"OHwo"}],"y6qF":[function(require,module,exports) {
var global = arguments[3];
var define;
var e,t=arguments[3];!function(r){var o="object"==typeof exports&&exports,a="object"==typeof module&&module&&module.exports==o&&module,n="object"==typeof t&&t;n.global!==n&&n.window!==n||(r=n);var c=function(e){this.message=e};(c.prototype=new Error).name="InvalidCharacterError";var h=function(e){throw new c(e)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=/[\t\n\f\r ]/g,s={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&h("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,o,a,n=e.length%3,c="",i=-1,s=e.length-n;++i<s;)t=e.charCodeAt(i)<<16,r=e.charCodeAt(++i)<<8,o=e.charCodeAt(++i),c+=d.charAt((a=t+r+o)>>18&63)+d.charAt(a>>12&63)+d.charAt(a>>6&63)+d.charAt(63&a);return 2==n?(t=e.charCodeAt(i)<<8,r=e.charCodeAt(++i),c+=d.charAt((a=t+r)>>10)+d.charAt(a>>4&63)+d.charAt(a<<2&63)+"="):1==n&&(a=e.charCodeAt(i),c+=d.charAt(a>>2)+d.charAt(a<<4&63)+"=="),c},decode:function(e){var t=(e=String(e).replace(i,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&h("Invalid character: the string to be decoded is not correctly encoded.");for(var r,o,a=0,n="",c=-1;++c<t;)o=d.indexOf(e.charAt(c)),r=a%4?64*r+o:o,a++%4&&(n+=String.fromCharCode(255&r>>(-2*a&6)));return n},version:"1.0.0"};if("function"==typeof e&&"object"==typeof e.amd&&e.amd)e(function(){return s});else if(o&&!o.nodeType)if(a)a.exports=s;else for(var f in s)s.hasOwnProperty(f)&&(o[f]=s[f]);else r.base64=s}(this);
},{}],"KBaF":[function(require,module,exports) {

"use strict";var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")},t=e();module.exports=exports=t.fetch,t.fetch&&(exports.default=t.fetch.bind(t)),exports.Headers=t.Headers,exports.Request=t.Request,exports.Response=t.Response;
},{}],"LVu9":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=a(require("base-64")),n=a(require("node-fetch"));function a(e){return e&&e.__esModule?e:{default:e}}"fetch"in e||(e.fetch=n.default);var i={apiUrl:"/api",useReq64:!1,retries:1,_requestLevel:0,_requestPackage:0,_packageData:[],setEndPoint:function(e){this.apiUrl=e},responseFilter:function(e,t){return!0},packageBegin:function(){this._requestPackage++},packageEnd:function(e){this._requestPackage&&(--this._requestPackage||this.packageSend(e))},packRequests:function(e,t=null){this.packageBegin(),e(),this.packageEnd(t)},packageSend:function(e){if(!this._packageData.length)return;let n=this._packageData;this._packageData=[];for(var a="",i=0;i<n.length;i++)a+="r"+i+","+t.default.encode(this.encodeParams(n[i][2]))+";";this._showProgress(),this.apiCall({rpkg:a},(t,a)=>{this._hideProgress();for(let e=0;e<n.length;e++)try{var i=t["r"+e];if(!i){null!=n[e][1]&&n[e][1](n[e][2]);continue}null!=n[e][0]&&this.responseFilter(i,n[e][2])&&n[e][0](i,n[e][2])}catch(s){}e&&e()},e=>{this._hideProgress();for(let t=0;t<n.length;t++)null!=n[t][1]&&n[t][1](n[t][2])})},_showProgress:function(){"document"in e&&(this._requestLevel++,this._requestLevel>0&&e.document.documentElement.classList.add("busy"))},_hideProgress:function(){"document"in e&&(this._requestLevel--,this._requestLevel||e.document.documentElement.classList.remove("busy"))},encodeParams:function(e){let t=[];if(e instanceof FormData)for(let n of e.entries())t.push(encodeURIComponent(n[0])+"="+encodeURIComponent(n[1]));else for(let n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},apiCall:function(n,a,i,s,o){let r=this.apiUrl+"?_="+Date.now();if("GET"!=s&&"POST"!=s&&(s="auto"),void 0===o&&(o=this.retries),this._requestPackage)return n instanceof FormData||(n={...n}),void this._packageData.push([a,i,n]);this._showProgress();let l=n,c={credentials:"include",headers:{Accept:"text/html,application/xhtml+xml,application/xml,application/json;q=0.9"},method:s,body:null,multipart:!1};if(!(l instanceof FormData)){l=new FormData;for(let e in n)n[e]instanceof File||n[e]instanceof Blob?l.append(e,n[e],n[e].name):l.append(e,n[e])}for(let e of l.entries())if(e[1]instanceof File||e[1]instanceof Blob){c.method="POST",c.multipart=!0;break}if(this.useReq64&&!c.multipart){let e=new FormData;e.append("req64",t.default.encode(this.encodeParams(l))),l=e}if("auto"==c.method){let e=0;c.method="GET";for(let t of l.entries())if((e+=t[0].length+t[1].length+2)>960){c.method="POST";break}}"GET"==c.method?r+="&"+this.encodeParams(l):c.multipart?c.body=l:(c.headers["Content-Type"]="application/x-www-form-urlencoded",c.body=this.encodeParams(l)),e.fetch(r,c).then(e=>e.json()).then(e=>{if(this._hideProgress(),a&&this.responseFilter(e,n))try{a(e,n)}catch(t){}}).catch(e=>{this._hideProgress(),0==o?i&&i(n):this.apiCall(l,a,i,s,o-1)})},post:function(e,t,n){return this.apiCall(e,t,n,"POST")},get:function(e,t,n){return this.apiCall(e,t,n,"GET")},fetch:function(e){return new Promise((t,n)=>{this.apiCall(e,t,n)})},makeUrl:function(e){return this.apiUrl+(-1==this.apiUrl.indexOf("?")?"?":"&")+this.encodeParams(e)}};exports.default=i;
},{"base-64":"y6qF","node-fetch":"KBaF"}],"rn2q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@rsthn/rin"),e=s(require("./api.js"));function s(t){return t&&t.__esModule?t:{default:t}}var i=t.EventDispatcher.extend({className:"DataSource",debounceDelay:250,request:null,includeCount:!1,includeEnum:!1,includeList:!0,eid:null,count:0,list:null,enum:null,__ctor:function(e,s){this._super.EventDispatcher.__ctor(),this.basePath=e,s&&Object.assign(this,s),this.request=new t.Model(this.request),this.eid=Math.random().toString().substr(2),this.count=0,this.list=new t.ModelList,this.list.dataSource=this,this.enum=new t.ModelList,this.enum.dataSource=this,this.request.addEventListener(this.eid+":propertyChanged",this.forwardRequestEvent,this),this.list.addEventListener(this.eid+":itemsCleared",this.forwardListEvent,this),this.list.addEventListener(this.eid+":itemsChanged",this.forwardListEvent,this),this.list.addEventListener(this.eid+":itemRemoved",this.forwardListEvent,this),this.list.addEventListener(this.eid+":itemChanged",this.forwardListEvent,this),this.list.addEventListener(this.eid+":itemAdded",this.forwardListEvent,this),this.enum.addEventListener(this.eid+":itemsCleared",this.forwardEnumEvent,this),this.enum.addEventListener(this.eid+":itemsChanged",this.forwardEnumEvent,this),this.enum.addEventListener(this.eid+":itemRemoved",this.forwardEnumEvent,this),this.enum.addEventListener(this.eid+":itemChanged",this.forwardEnumEvent,this),this.enum.addEventListener(this.eid+":itemAdded",this.forwardEnumEvent,this)},forwardRequestEvent:function(t,e){this.prepareEvent("request"+t.name[0].toUpperCase()+t.name.substr(1),e).setSource(t.source).resume()},forwardListEvent:function(t,e){this.prepareEvent("list"+t.name[0].toUpperCase()+t.name.substr(1),e).setSource(t.source).resume()},forwardEnumEvent:function(t,e){this.prepareEvent("enum"+t.name[0].toUpperCase()+t.name.substr(1),e).setSource(t.source).resume()},refresh:function(t="full",s=null){"function"==typeof t&&(s=t,t="full"),this._timeout&&(clearTimeout(this._timeout),this._timeout=null);const i=()=>{this._timeout=null,e.default.packageBegin(),!this.includeCount||"full"!=t&&"filter"!=t||this.fetchCount(),this.includeEnum&&"full"==t&&this.fetchEnum(),this.includeList&&this.fetchList(),e.default.packageEnd(s)};!0===t?(t="full",i()):this._timeout=setTimeout(i,this.debounceDelay)},fetch:function(t,e=!1){return new Promise((s,i)=>{let n=1==e?null:this.list.find(t,!0);n?s(n.get()):this.fetchOne(t,t=>{t&&200==t.response&&t.data.length>0?s(t.data[0]):i(t)})})},delete:function(t){return new Promise((e,s)=>{this.fetchDelete(t,t=>{200==t.response?e(t):s(t.error)})})},fetchList:function(){let t={...this.request.get()};t.f=this.basePath+".list",e.default.fetch(t).then(t=>{this.list.setData(200==t.response?t.data:null),this.dispatchEvent("listChanged")})},fetchEnum:function(){let t={...this.request.get()};t.f=this.basePath+".enum",e.default.fetch(t).then(t=>{this.enum.setData(200==t.response?t.data:null),this.dispatchEvent("enumChanged")})},fetchCount:function(){let t={...this.request.get()};t.f=this.basePath+".count",e.default.fetch(t).then(t=>{this.count=200==t.response?t.count:0,this.dispatchEvent("countChanged")})},fetchOne:function(t,s){let i={...this.request.get(),...t};i.f=this.basePath+".get",e.default.fetch(i).then(t=>{s(t)})},fetchDelete:function(t,s){let i={...this.request.get(),...t};i.f=this.basePath+".delete",e.default.fetch(i).then(t=>{s(t)})},fetchData:function(t){let s={...this.request.get(),...t};return"."==s.f[0]&&(s.f=this.basePath+s.f),e.default.fetch(s)},makeUrl:function(t){let s={...this.request.get(),...t};return"."==s.f[0]&&(s.f=this.basePath+s.f),e.default.makeUrl(s)}});exports.default=i;
},{"@rsthn/rin":"OHwo","./api.js":"LVu9"}],"gfrO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const n={interpolate:function(n,t,u,r,e){let o={},i={},c=0;for(let O in n)o[O]=0,i[O]=n[O],c++;let f=null,I=Date.now()/1e3,N=0,a=function(){let a=Date.now()/1e3;N=a-I,I=a;for(let e in o){if(o[e]==u[e])continue;o[e]+=N,o[e]>=u[e]&&(o[e]=u[e],c--);let f=r[e](o[e]/u[e]);i[e]=(1-f)*n[e]+f*t[e]}e(i,0==c),0==c&&clearInterval(f)};f=setInterval(a,16),a()},Linear:{IN:function(n){return n},OUT:function(n){return n},IN_OUT:function(n){return n}},Back:{k:1.70158,IN:function(t,u){return void 0===u&&(u=n.Back.k),t*t*((u+1)*t-u)},OUT:function(t,u){return 1-n.Back.IN(1-t,u)},IN_OUT:function(t,u){return t<.5?n.Back.IN(2*t,u)/2:n.Back.OUT(2*(t-.5),u)/2+.5}},Bounce:{getConst:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},IN:function(t){return 1-n.Bounce.getConst(1-t)},OUT:function(t){return n.Bounce.getConst(t)},IN_OUT:function(t){return t<.5?(1-n.Bounce.getConst(1-2*t))/2:n.Bounce.getConst(2*(t-.5))/2+.5}},Circ:{IN:function(n){return 1-Math.sqrt(1-n*n)},OUT:function(t){return 1-n.Circ.IN(1-t)},IN_OUT:function(t){return t<.5?n.Circ.IN(2*t)/2:n.Circ.OUT(2*(t-.5))/2+.5}},Cubic:{IN:function(n){return n*n*n},OUT:function(t){return 1-n.Cubic.IN(1-t)},IN_OUT:function(t){return t<.5?n.Cubic.IN(2*t)/2:n.Cubic.OUT(2*(t-.5))/2+.5}},Expo:{IN:function(n){return Math.pow(2,12*(n-1))},OUT:function(n){return 1-Math.pow(2,-12*n)},IN_OUT:function(n){return(n*=2)<1?Math.pow(2,12*(n-1))/2:(2-Math.pow(2,-12*(n-1)))/2}},Power:{p:12,IN:function(t){return Math.pow(t,n.Power.p)},OUT:function(t){return 1-n.Power.IN(1-t)},IN_OUT:function(t){return t<.5?n.Power.IN(2*t)/2:n.Power.OUT(2*(t-.5))/2+.5}},Quad:{IN:function(n){return n*n},OUT:function(t){return 1-n.Quad.IN(1-t)},IN_OUT:function(t){return t<.5?n.Quad.IN(2*t)/2:n.Quad.OUT(2*(t-.5))/2+.5}},Quartic:{IN:function(n){return n*n*n*n},OUT:function(t){return 1-n.Quartic.IN(1-t)},IN_OUT:function(t){return t<.5?n.Quartic.IN(2*t)/2:n.Quartic.OUT(2*(t-.5))/2+.5}},Quintic:{IN:function(n){return n*n*n*n*n},OUT:function(t){return 1-n.Quintic.IN(1-t)},IN_OUT:function(t){return t<.5?n.Quintic.IN(2*t)/2:n.Quintic.OUT(2*(t-.5))/2+.5}},Sine:{IN:function(n){return 1-Math.sin(1.5708*(1-n))},OUT:function(n){return Math.sin(1.5708*n)},IN_OUT:function(n){return(Math.cos(3.1416*n)-1)/-2}},Step:{IN:function(n){return 1!=n?0:1},OUT:function(n){return 1!=n?0:1},IN_OUT:function(n){return 1!=n?0:1}}};var t=n;exports.default=t;
},{}],"Cd1J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@rsthn/rin");const i=t.Class.extend({list:null,initialData:null,data:null,stack:null,block:null,timeScale:1,time:0,blockTime:0,index:0,paused:!1,finished:!1,onFinishedCallback:null,onUpdatedCallback:null,__ctor:function(){this.list=[],this.initialData={},this.data={},this.stack=[],this.block=this.list,this.reset()},__dtor:function(){},clone:function(){let t=new i;return t.list=this.list,t.initialData=this.initialData,t.reset()},onFinished:function(t){return this.onFinishedCallback=t,this},onUpdated:function(t){return this.onUpdatedCallback=t,this},reset:function(){this.stack.length=0,this.blockTime=0,this.time=0,this.index=0,this.block=this.list,this.paused=!0,this.finished=!1,this.handle=null;for(let t in this.initialData)this.data[t]=this.initialData[t];return this},initial:function(t){return this.initialData=t,this.reset()},speed:function(t){return this.timeScale=t>0?t:1,this},setOutput:function(t){return this.data=t,this},pause:function(){this.paused||(clearInterval(this.handle),this.paused=!0)},resume:function(){if(!this.paused)return;let t=Date.now()/1e3;this.handle=setInterval(()=>{let i=Date.now()/1e3,e=i-t;t=i,this.update(e),this.onUpdatedCallback&&this.onUpdatedCallback(this.data,this)},16),this.onUpdatedCallback&&this.onUpdatedCallback(this.data,this),this.paused=!1},update:function(i){if(this.paused)return!1;if(this.index>=this.block.length)return!0;let e,s,a,l=0;for(this.time+=i*this.timeScale;this.index<this.block.length;){let n,h=this.block[this.index];switch(h.op){case"parallel":if(0==h.started)for(h.blocks.length=0,h.started=!0,l=0;l<h.block.length;l++)h.blocks.push([h.block[l]]),h.indices[l]=0,h.blockTimes[l]=this.blockTime;e=this.block,s=this.index;let o=0,c=a=this.blockTime;for(l=0;l<h.blocks.length;l++)this.block=h.blocks[l],this.index=h.indices[l],this.blockTime=h.blockTimes[l],!0===this.update(0)&&o++,this.blockTime>c&&(c=this.blockTime),h.blockTimes[l]=this.blockTime,h.blocks[l]=this.block,h.indices[l]=this.index;if(this.block=e,this.index=s,this.blockTime=a,h.fn&&h.fn.call(this),o!=h.blocks.length)return!1;h.started=!1,this.blockTime=c,this.index++;break;case"serial":if(0==h.started&&(h._block=h.block,h._index=0,h._blockTime=this.blockTime,h.started=!0),e=this.block,s=this.index,a=this.blockTime,this.block=h._block,this.index=h._index,this.blockTime=h._blockTime,l=this.update(0),h._block=this.block,h._index=this.index,h._blockTime=this.blockTime,this.block=e,this.index=s,this.blockTime=a,h.fn&&h.fn.call(this),!0!==l)return!1;h.started=!1,this.blockTime=h._blockTime,this.index++;break;case"repeat":return 0==h.started&&(h._block=h.block,h._index=0,h._blockTime=this.blockTime,h._count=h.count,h.started=!0),e=this.block,s=this.index,a=this.blockTime,this.block=h._block,this.index=h._index,this.blockTime=h._blockTime,l=this.update(0),h._block=this.block,h._index=this.index,h._blockTime=this.blockTime,this.block=e,this.index=s,this.blockTime=a,h.fn&&h.fn.call(this),!0===l&&(h._count<=1?(h.started=!1,this.blockTime=h._blockTime,this.index++,!1):(h._index=0,h._count--,!1));case"set":this.data[h.field]=h.value,this.index++;break;case"restart":this.index=0;break;case"wait":if(n="string"==t.Rin.typeOf(h.duration)?this.data[h.duration]:h.duration,this.time<this.blockTime+n)return!1;this.blockTime+=n,this.index++;break;case"range":if(0==h.started&&(null===h.startValue?h._startValue=this.data[h.field]:h._startValue=h.startValue,h._endValue=h.endValue,h.started=!0),n="string"==t.Rin.typeOf(h.duration)?this.data[h.duration]:h.duration,i=this.time<this.blockTime+n?(this.time-this.blockTime)/n:1,h.easing&&1!=i?this.data[h.field]=h.easing(i)*(h._endValue-h._startValue)+h._startValue:this.data[h.field]=i*(h._endValue-h._startValue)+h._startValue,1!=i)return!1;h.started=!1,this.blockTime+=n,this.index++;break;case"rand":if(0==h.started&&(h.started=!0,h.last=null),n="string"==t.Rin.typeOf(h.duration)?this.data[h.duration]:h.duration,i=this.time<this.blockTime+n?(this.time-this.blockTime)/n:1,h.easing&&1!=i?h.cur=~~(h.easing(i)*h.count):h.cur=~~(i*h.count),h.cur!=h.last){for(;(l=~~(Math.random()*(h.endValue-h.startValue+1))+h.startValue)==this.data[h.field];);this.data[h.field]=l,h.last=h.cur}if(1!=i)return!1;h.started=!1,this.blockTime+=n,this.index++;break;case"randt":if(n="string"==t.Rin.typeOf(h.duration)?this.data[h.duration]:h.duration,i=this.time<this.blockTime+n?(this.time-this.blockTime)/n:1,l=h.easing&&1!=i?h.easing(i)*(h.count-1):i*(h.count-1),this.data[h.field]=h.table[~~((l+h.count)%h.count)],1!=i)return!1;this.blockTime+=n,this.index++;break;case"play":h.snd.play(),this.index++;break;case"exec":h.fn.call(this,this),this.index++}}return this.block==this.list&&(this.finished||null==this.onFinishedCallback||this.onFinishedCallback(),this.pause(),this.finished=!0),!0},parallel:function(){let t=[];return this.block.push({op:"parallel",started:!1,block:t,blocks:[],indices:[],blockTimes:[]}),this.stack.push(this.block),this.block=t,this},serial:function(){let t=[];return this.block.push({op:"serial",started:!1,block:t}),this.stack.push(this.block),this.block=t,this},repeat:function(t){let i=[];return this.block.push({op:"repeat",started:!1,block:i,count:t}),this.stack.push(this.block),this.block=i,this},callback:function(t){let i=this.stack[this.stack.length-1];return i[i.length-1].fn=t,this},end:function(){return this.block=this.stack.pop(),this},set:function(t,i){return this.block.push({op:"set",field:t,value:i}),this},restart:function(t){return this.block.push({op:"restart"}),this},wait:function(t){return this.block.push({op:"wait",duration:t}),this},range:function(t,i,e,s,a){return this.block.push({op:"range",started:!1,field:t,duration:i,startValue:e,endValue:s,easing:a||null}),this},rand:function(t,i,e,s,a,l){return this.block.push({op:"rand",started:!1,field:t,duration:i,count:e,startValue:s,endValue:a,easing:l||null}),this},randt:function(t,i,e,s,a,l){let n=[];for(let h=0;h<e;h++)n.push(h%(a-s+1)+s);for(let h=e>>2;h>0;h--){let t=~~(Math.random()*e),i=~~(Math.random()*e),s=n[i];n[i]=n[t],n[t]=s}return this.block.push({op:"randt",field:t,duration:i,count:e,startValue:s,endValue:a,table:n,easing:l||null}),this},play:function(t){return this.block.push({op:"play",snd:t}),this},exec:function(t){return this.block.push({op:"exec",fn:t}),this}});var e=i;exports.default=e;
},{"@rsthn/rin":"OHwo"}],"eKHE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("../element.js")),t=a(require("../router.js"));function a(e){return e&&e.__esModule?e:{default:e}}var s=e.default.register("r-tabs",{container:null,events:{"click [data-name]":function(e){e.continuePropagation=!0,this.dataset.baseRoute?location="#"+t.default.realLocation(this.dataset.baseRoute.replace("@",e.source.dataset.name)):this.selectTab(e.source.dataset.name)}},init:function(){this._routeHandler=((e,t)=>{t.route.changed&&this.showTab(t.tabName)})},ready:function(){"container"in this.dataset?this.container=document.querySelector(this.dataset.container):this.container=this.nextElementSibling,this._hideTabsExcept(this.dataset.initial)},onConnected:function(){this.dataset.baseRoute&&t.default.addRoute(this.dataset.baseRoute.replace("@",":tabName"),this._routeHandler)},onDisconnected:function(){this.dataset.baseRoute&&t.default.removeRoute(this.dataset.baseRoute.replace("@",":tabName"),this._routeHandler)},_hideTabsExcept:function(e){e||(e=""),null!=this.container&&this.container.querySelectorAll(":scope > [data-name]").forEach(t=>{t.dataset.name==e?(t.classList.remove("x-hidden"),this.dispatch("tabShown",{name:t.dataset.name,el:t})):(t.classList.add("x-hidden"),this.dispatch("tabHidden",{name:t.dataset.name,el:t}))}),this.querySelectorAll("[data-name]").forEach(t=>{t.dataset.name==e?t.classList.add("active"):t.classList.remove("active")})},showTab:function(e){return this._hideTabsExcept(e)},selectTab:function(e){if(this.dataset.baseRoute){const a="#"+t.default.realLocation(this.dataset.baseRoute.replace("@",e));if(location.hash!=a)return void(location=a)}this.showTab(e)}});exports.default=s;
},{"../element.js":"yFRv","../router.js":"hPM2"}],"aahd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("../element.js")),t=s(require("../api.js"));function s(e){return e&&e.__esModule?e:{default:e}}var i=e.default.register("r-form",{events:{"change [data-field]":"_fieldChanged","click input[type=reset]":"reset","click .reset":"reset","click input[type=submit]":"submit","click button[type=submit]":"submit","click .submit":"submit","submit form":"submit"},model:{},ready:function(){let e=document.createElement("form");e.append(...this.childNodes),this.append(e);let t={},s=this.model.get();this.querySelectorAll("[data-field]").forEach(e=>{e.name=e.dataset.field,s[e.name]=e.type;let i=e.dataset.default;if(null==i)switch(e.type){case"radio":if(!e.checked)return;i=e.value;break;case"checkbox":i=e.checked?"1":"0";break;case"field":i=e.getValue();break;case"file":default:i=""}t[e.dataset.field]=i});for(let i in s)s[i]=i in t?t[i]:"";t=s,this.model.defaults=t,this.model.reset(),this.clearMarkers()},filterString:function(e,t){return e},_change:function(e){if("createEvent"in document){let t=document.createEvent("HTMLEvents");t.initEvent("change",!1,!0),e.dispatchEvent(t)}else e.fireEvent("onchange")},_setField:function(e,t,s){if(e)for(e of this.querySelectorAll('[data-field="'+e+'"]'))switch(e.type||e.tagName.toLowerCase()){case"select":e.val=e.dataset.value=e.multiple&&t?t.split(","):t,e.value=e.val=e.dataset.value,!0!==s&&this._change(e);break;case"checkbox":e.checked=!!parseInt(t);break;case"radio":e.checked=t==e.value;break;case"field":e.val=e.dataset.value=t,e.setValue(t);break;case"file":t instanceof File||t instanceof Blob?(e.val=t,e.dataset.value=t):t instanceof FileList?(e.val=t,e.dataset.value=t):(e.val=e.dataset.value="",e.value="");break;default:e.val=e.dataset.value=t,e.value=t,!0!==s&&this._change(e)}},_getField:function(e,t=null,s=!1){if(!e)return null;if("string"!=typeof e){let i=null==e.value?e.val:e.value;switch(null===i&&(i=t),e.type||e.tagName.toLowerCase()){case"select":t=e.multiple&&i?i.join(","):i;break;case"checkbox":t=e.checked?"1":"0";break;case"radio":e.checked&&(t=e.value);break;case"field":t=e.getValue();break;case"file":t=s?e.files&&e.files.length?e.multiple?e.files:e.files[0]:null:e.val;break;default:t=i}return null===t?"":t}for(e of(t=null,this.querySelectorAll('[data-field="'+e+'"]')))t=this._getField(e,t);return null===t?"":t},getField:function(e){return this._getField(e)},clearMarkers:function(){this.classList.remove("busy"),this.querySelectorAll(".message").forEach(e=>e.classList.add("x-hidden")),this.querySelectorAll("span.field-error").forEach(e=>e.remove()),this.querySelectorAll(".field-error").forEach(e=>{e.classList.remove("field-error"),e.classList.remove("is-invalid")}),this.querySelectorAll(".field-passed").forEach(e=>e.classList.remove("field-passed"))},_fieldChanged:function(e){let t=e.source;"file"==t.type?this.model.set(t.dataset.field,this._getField(t,null,!0),!0):this.model.set(t.dataset.field,this._getField(t)),e.continuePropagation=!0},onModelPropertyChanged:function(e,t){this._setField(t.name,t.value)},_onSuccess:function(e){let t;this.classList.remove("busy"),this.dispatch("formSuccess",e),e.message&&null!=(t=this.querySelector(".message.success"))&&(t.innerHTML=this.filterString(e.message.replace(/\n/g,"<br/>"),e),t.classList.remove("x-hidden"))},_onFailure:function(e){let t;if(this.classList.remove("busy"),this.dispatch("formError",e),e.fields){for(let t in e.fields){let s=this.querySelector('[data-field-container="'+t+'"]');if(!s&&!(s=this.querySelector('[data-field="'+t+'"]')))continue;let i=document.createElement("span");i.classList.add("field-error"),i.innerHTML=this.filterString(e.fields[t].replace(/\n/g,"<br/>"),e),s.classList.add("field-error"),s.classList.add("is-invalid"),"bottom"==this.dataset.errorsAt?s.parentElement.append(i):"top"==this.dataset.errorsAt?s.parentElement.prepend(i):s.parentElement.insertBefore(i,s.nextElementSibling),setTimeout(function(e){return function(){e.classList.add("active")}}(i),25)}e.error&&null!=(t=this.querySelector(".message.error"))&&(t.innerHTML=this.filterString(e.error.replace(/\n/g,"<br/>"),e),t.classList.remove("x-hidden"))}else null!=(t=this.querySelector(".message.error"))&&(t.innerHTML=this.filterString(e.error.replace(/\n/g,"<br/>"),e)||"Error: "+e.response,t.classList.remove("x-hidden"))},reset:function(e){if(this.model.reset(e),this.clearMarkers(),!1===e)for(var t in this.model.data)this._setField(t,this.model.data[t],!0);return!1},submit:function(){if(this.classList.contains("busy"))return;let e={};"false"==this.dataset.strict&&Object.assign(e,this.model.get());let s={};this.querySelectorAll("[data-field]").forEach(e=>s[e.dataset.field]=!0),Object.keys(s).forEach(t=>e[t]=this._getField(t)),this.model.set(e);let i=this.dataset.formAction||this.formAction;i&&(this.clearMarkers(),this.classList.add("busy"),"function"!=typeof i?(e.f=i,t.default.apiCall(e,e=>this[200==e.response?"_onSuccess":"_onFailure"](e),e=>this._onFailure({error:"Unable to execute request."}))):i(e,e=>this[200==e.response?"_onSuccess":"_onFailure"](e)))}});exports.default=i;
},{"../element.js":"yFRv","../api.js":"LVu9"}],"bgTB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../element.js")),e=i(require("../router.js"));function i(t){return t&&t.__esModule?t:{default:t}}var s=t.default.register("r-panel",{route:null,init:function(){this.style.display="",this._onActivate=((t,e)=>{e.route.changed&&this.show(!0)}),this._onDeactivate=((t,e)=>{this.hide()}),this.hide()},ready:function(){},onConnected:function(){this.dataset.route?(this.route=e.default.addRoute(this.dataset.route,this._onActivate,this._onDeactivate),this.classList.remove("active")):this.classList.add("active")},onDisconnected:function(){this.dataset.route&&e.default.removeRoute(this.dataset.route,this._onActivate,this._onDeactivate)},hide:function(){this.classList.remove("active"),this.dispatch("panelHidden",this.route?this.route.args:{})},show:function(t=!1){if(this.dataset.route&&!t){let t="#"+this.dataset.route;if(window.location.hash.substr(0,t.length)!=t)return void(window.location=t)}this.classList.add("active"),this.dispatch("panelShown",this.route?this.route.args:{})}});exports.default=s;
},{"../element.js":"yFRv","../router.js":"hPM2"}],"mVSt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@rsthn/rin"),e=i(require("../element.js"));function i(t){return t&&t.__esModule?t:{default:t}}var s=e.default.register("r-list",{list:null,container:null,template:null,isEmpty:!1,isDynamicTemplate:!1,ready:function(){this.container=this.querySelector(this.dataset.container||".x-data"),this.container||(this.container=this);let e=this.template_elem=this.querySelector("template");e?("dynamic"!=e.dataset.mode?this.template=t.Template.compile(e.innerHTML):(this.template=(()=>e.innerHTML),this.isDynamicTemplate=!0),e.remove()):this.template=(()=>""),this.container.textContent=" ",this.setEmpty(!0)},rready:function(){let t=this.getFieldByPath(this.dataset.list);t?this.setList(t):console.error("List not found: "+this.dataset.list)},setEmpty:function(t){this.isEmpty!==t&&(t?(this.querySelectorAll(".x-empty").forEach(t=>t.classList.remove("x-hidden")),this.querySelectorAll(".x-not-empty").forEach(t=>t.classList.add("x-hidden"))):(this.querySelectorAll(".x-empty").forEach(t=>t.classList.add("x-hidden")),this.querySelectorAll(".x-not-empty").forEach(t=>t.classList.remove("x-hidden"))),this.isEmpty=t)},setList:function(e){e&&t.Rin.isTypeOf(t.ModelList,e)&&this.list!==e&&(null!=this.list&&this.list.removeEventListener(this.eid+":*"),this.list=e,this.list.addEventListener(this.eid+":itemsCleared",this.onItemsCleared,this),this.list.addEventListener(this.eid+":itemsChanged",this.onItemsChanged,this),this.list.addEventListener(this.eid+":itemRemoved",this.onItemRemoved,this),this.list.addEventListener(this.eid+":itemChanged",this.onItemChanged,this),this.list.addEventListener(this.eid+":itemAdded",this.onItemAdded,this))},buildItem:function(t,e,i=!1){let s=this.template(e.get());if(i)return s;let n=document.createElement("div");n.dataset.iid=t,n.innerHTML=s,n.querySelectorAll('[data-model=":list-item"]').forEach(t=>{t.model=e,t.dataset.model="this.model"});for(let a of this.template_elem.attributes)a.nodeName.startsWith("data-_")||"data-mode"==a.nodeName||n.setAttribute(a.nodeName,a.nodeValue);return n},onItemsCleared:function(){this.container._timeout=setTimeout(()=>{this.setEmpty(!0),this.container._timeout=null,this.container.textContent=""},300)},onItemsChanged:function(){if(0==this.list.length())return;this.container._timeout&&clearTimeout(this.container._timeout),this.container._timeout=null,this.container.textContent="";let t=0;for(let e of this.list.getData())"true"==this.dataset.dynamic?this.container.append(this.buildItem(this.list.itemId[t++],e)):this.container.innerHTML+=this.buildItem(this.list.itemId[t++],e,!0);this.setEmpty(0==t)},onItemRemoved:function(t,e){if("true"!=this.dataset.dynamic)return void this.onItemsChanged();let i=this.container.querySelector('[data-iid="'+e.id+'"]');i&&(i.remove(),this.setEmpty(0==this.list.length()))},onItemChanged:function(t,e){if(this.isDynamicTemplate)return;if("true"!=this.dataset.dynamic)return void this.onItemsChanged();let i=this.container.querySelector('[data-iid="'+e.id+'"]');i&&(i.innerHTML=this.template(e.item))},onItemAdded:function(t,e){"head"==e.position?"true"==this.dataset.dynamic?this.container.prepend(this.buildItem(e.id,e.item)):this.container.innerHTML=this.buildItem(e.id,e.item,!0)+this.container.innerHTML:"true"==this.dataset.dynamic?this.container.append(this.buildItem(e.id,e.item)):this.container.innerHTML+=this.buildItem(e.id,e.item,!0),this.setEmpty(!1)}});exports.default=s;
},{"@rsthn/rin":"OHwo","../element.js":"yFRv"}],"i8YR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../element.js"));function t(e){return e&&e.__esModule?e:{default:e}}var r=e.default.register("r-item",{init:function(){},rready:function(){let e=this.getFieldByPath(this.dataset.model);e||(e={}),this.setModel(e)}});exports.default=r;
},{"../element.js":"yFRv"}],"otkn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@rsthn/rin"),t=o(require("../element.js")),s=o(require("../data-source.js"));function o(e){return e&&e.__esModule?e:{default:e}}var i=t.default.register("r-paginator",{source:null,template:null,init:function(){this.setModel({offsetStart:0,offsetEnd:0,count:0,offset:0,currentPageSize:this.dataset.pageSize||25,pageSize:this.dataset.pageSize||25}),this.listen("propertyChanged.pageSize",(e,t)=>{this.model.get("currentPageSize")!=t.value&&(this.model.set("currentPageSize",t.value),this.updateOffset("range"))})},rready:function(){let e=this.getFieldByPath(this.dataset.source);e?this.setSource(e):console.error("data-source not found: "+this.dataset.source)},setSource:function(t){t&&e.Rin.isTypeOf(s.default,t)&&this.source!==t&&(null!=this.source&&(this.source.removeEventListener(this.eid+":*"),this.source.includeCount=!1),this.source=t,this.source.includeCount=!0,this.updateOffset(),this.source.addEventListener(this.eid+":requestPropertyChanged",this.onRequestPropertyChanged,this),this.source.addEventListener(this.eid+":countChanged",this.onCountChanged,this),this.source.addEventListener(this.eid+":listItemRemoved",this.onItemRemoved,this),this.source.addEventListener(this.eid+":listItemAdded",this.onItemAdded,this),this.source.setNamespace(this.eid),this.source.request.update(!0),this.source.setNamespace(null))},updateOffset:function(e=null){this.model.set("offsetStart",0!=this.model.get("count")?this.model.get("offset")+1:0),this.model.set("offsetEnd",Math.min(this.model.get("count"),this.model.get("offsetStart")+this.model.getInt("pageSize")-1)),this.model.update("count");let t=this.source.request.get("count"),s=this.source.request.get("offset");this.source.request.set("count",this.model.getInt("pageSize")),this.source.request.set("offset",this.model.get("offset")),!e||t==this.source.request.get("count")&&s==this.source.request.get("offset")||this.source.refresh(e)},onRequestPropertyChanged:function(e,t){"count"!=t.name&&"offset"!=t.name&&this.model.set(t.name,t.value)},onModelPropertyChanged:function(e,t){-1==["offsetStart","offsetEnd","count","offset","currentPageSize","pageSize"].indexOf(t.name)&&this.source.request.get(t.name)!=t.value&&(this.source.request.set(t.name,t.value),this.source.refresh("filter"))},onCountChanged:function(e,t){this.model.set("count",e.source.count,!1),this.updateOffset()},onItemRemoved:function(e,t){this.model.set("count",this.model.getInt("count")-1,!1),this.updateOffset()},onItemAdded:function(e,t){this.model.set("count",this.model.getInt("count")+1,!1),this.updateOffset()},prevPage:function(){if(this.model.get("offset")<=0)return;let e=this.model.get("offset")-this.model.getInt("pageSize");e<0&&(e=0),this.model.set("offset",e),this.updateOffset("range")},nextPage:function(){let e=this.model.get("offset")+this.model.getInt("pageSize");e>=this.model.get("count")||(this.model.set("offset",e),this.updateOffset("range"))},firstPage:function(){this.model.set("offset",0),this.updateOffset("range")},lastPage:function(){let e=this.model.get("count")-this.model.getInt("pageSize");e<0&&(e=0),this.model.set("offset",e),this.updateOffset("range")},refresh:function(){this.source.refresh("full")},clear:function(e){for(let t=0;t<e.length;t++)this.model.set(e[t],"")}});exports.default=i;
},{"@rsthn/rin":"OHwo","../element.js":"yFRv","../data-source.js":"rn2q"}],"gfy4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@rsthn/rin"),t=r(require("../element.js")),s=r(require("../data-source.js"));function r(e){return e&&e.__esModule?e:{default:e}}var o=t.default.register("r-table",{source:null,template:null,container:null,isEmpty:null,init:function(){this.setModel({})},ready:function(){if(this.container=this.querySelector(this.dataset.container||"tbody.x-data"),!this.container)throw new Error("r-table requires a container");"dynamic"!=this.container.dataset.mode?this.template=e.Template.compile(this.container.innerHTML):this.template=(()=>this.container.innerHTML),this.temporalBody=document.createElement("tbody"),this.container.textContent=" ",this.setEmpty(!0)},rready:function(){let e=this.getFieldByPath(this.dataset.source);e?this.setSource(e):console.error("data-source not found: "+this.dataset.source)},setEmpty:function(e){this.isEmpty!==e&&(e?(this.querySelectorAll(".x-empty").forEach(e=>e.classList.remove("x-hidden")),this.querySelectorAll(".x-not-empty").forEach(e=>e.classList.add("x-hidden"))):(this.querySelectorAll(".x-empty").forEach(e=>e.classList.add("x-hidden")),this.querySelectorAll(".x-not-empty").forEach(e=>e.classList.remove("x-hidden"))),this.isEmpty=e)},setSource:function(t){t&&e.Rin.isTypeOf(s.default,t)&&this.source!==t&&(null!=this.source&&this.source.removeEventListener(this.eid+":*"),this.source=t,this.source.addEventListener(this.eid+":requestPropertyChanged",this.onRequestPropertyChanged,this),this.source.addEventListener(this.eid+":listItemsCleared",this.onItemsCleared,this),this.source.addEventListener(this.eid+":listItemsChanged",this.onItemsChanged,this),this.source.addEventListener(this.eid+":listItemRemoved",this.onItemRemoved,this),this.source.addEventListener(this.eid+":listItemChanged",this.onItemChanged,this),this.source.addEventListener(this.eid+":listItemAdded",this.onItemAdded,this),this.source.setNamespace(this.eid),this.source.request.update(!0),this.source.setNamespace(null))},onRequestPropertyChanged:function(e,t){if(this.model.set(t.name,t.value),"sort"==t.name)this.querySelectorAll("thead [data-sort]").forEach(e=>e.dataset.order="");else if("order"==t.name){let s=this.querySelector('thead [data-sort="'+e.source.get("sort")+'"]');s&&(s.dataset.order=t.value)}},onModelPropertyChanged:function(e,t){if(this.source.request.get(t.name)==t.value)return;this.source.request.set(t.name,t.value);-1==["count","offset"].indexOf(t.name)&&this.source.refresh("filter")},onModelPropertyRemoved:function(e,t){"string"==typeof t.fields?this.source.request.remove(i):t.fields.forEach(e=>this.source.request.remove(e)),this.source.refresh("filter")},buildItem:function(e,t){let s=this.temporalBody;return s.innerHTML=this.template(t.get()),s.querySelectorAll('[data-model=":list-item"]').forEach(e=>{e.model=t,e.dataset.model="this.model"}),(s=s.firstElementChild).dataset.iid=e,s},onItemsCleared:function(e,t){this.container._timeout=setTimeout(()=>{this.setEmpty(!0),this.container._timeout=null,this.container.textContent=""},300)},onItemsChanged:function(e,t){if(0==this.source.list.length())return;this.container._timeout&&clearTimeout(this.container._timeout),this.container._timeout=null,this.container.textContent="";let s=0;for(let i of this.source.list.getData())this.container.append(this.buildItem(this.source.list.itemId[s++],i));this.setEmpty(0==s)},onItemRemoved:function(e,t){let s=this.container.querySelector('[data-iid="'+t.id+'"]');s&&(s.remove(),this.setEmpty(0==this.source.list.length()))},onItemChanged:function(e,t){let s=this.container.querySelector('[data-iid="'+t.id+'"]');if(!s)return;let i=this.buildItem(t.id,t.item);this.container.replaceChild(i,s)},onItemAdded:function(e,t){"head"==t.position?this.container.prepend(this.buildItem(t.id,t.item)):this.container.append(this.buildItem(t.id,t.item)),this.setEmpty(!1)},"event click thead [data-sort]":function(e,t){this.source.request.get("sort")==e.source.dataset.sort?(this.source.request.set("order","asc"==this.source.request.get("order")?"desc":"asc"),this.source.refresh("order")):(this.source.request.set("sort",e.source.dataset.sort),this.source.request.set("order","asc",!0),this.source.refresh("order"))},refresh:function(){this.source.refresh("full")},clear:function(e){for(let t=0;t<e.length;t++)this.model.set(e[t],"")}});exports.default=o;
},{"@rsthn/rin":"OHwo","../element.js":"yFRv","../data-source.js":"rn2q"}],"PfF3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("@rsthn/rin"),e=i(require("../element.js"));function i(t){return t&&t.__esModule?t:{default:t}}var s=e.default.register("r-select",{list:null,container:null,value:"",init:function(){this.container=document.createElement("select"),this.parentElement.insertBefore(this.container,this);for(let t of this.attributes)t.nodeName.startsWith("data-_")||"data-list"==t.nodeName||"data-blank"==t.nodeName||(this.container.setAttribute(t.nodeName,t.nodeValue),this.removeAttribute(t.nodeName));this.textContent=" ",this.style.display="none"},rready:function(){let t=this.getFieldByPath(this.dataset.list);t?(this.setList(t),this.parentElement.lastElementChild!==this&&this.parentElement.append(this)):console.error("List not found: "+this.dataset.list)},setList:function(e){e&&t.Rin.isTypeOf(t.ModelList,e)&&this.list!==e&&(null!=this.list&&this.list.removeEventListener(this.eid+":*"),this.list=e,this.list.dataSource&&(this.list.dataSource.includeEnum=!0),this.list.addEventListener(this.eid+":itemsCleared",this.onItemsCleared,this),this.list.addEventListener(this.eid+":itemsChanged",this.onItemsChanged,this),this.list.addEventListener(this.eid+":itemRemoved",this.onItemsChanged,this),this.list.addEventListener(this.eid+":itemChanged",this.onItemsChanged,this),this.list.addEventListener(this.eid+":itemAdded",this.onItemsChanged,this),this.onItemsChanged())},onItemsCleared:function(t,e){this.container.textContent=""},onItemsChanged:function(t,e){if(0==this.list.length())return;let i,s,n=this.list.getData(),a="";n[0].has("value")?i="value":n[0].has("id")&&(i="id"),n[0].has("label")?s="label":n[0].has("name")&&(s="name"),"blank"in this.dataset&&(a+='<option value="">'+this.dataset.blank+"</option>"),n.forEach(t=>a+='<option value="'+t.get(i)+'">'+t.get(s)+"</option>"),this.container.innerHTML=a,this.container.value=this.container.dataset.value}});exports.default=s;
},{"@rsthn/rin":"OHwo","../element.js":"yFRv"}],"uIMb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./elems/r-tabs.js")),r=d(require("./elems/r-form.js")),t=d(require("./elems/r-panel.js")),l=d(require("./elems/r-list.js")),s=d(require("./elems/r-item.js")),u=d(require("./elems/r-paginator.js")),a=d(require("./elems/r-table.js")),i=d(require("./elems/r-select.js"));function d(e){return e&&e.__esModule?e:{default:e}}var f={Tabs:e.default,Form:r.default,Panel:t.default,List:l.default,Item:s.default,Paginator:u.default,Table:a.default,Select:i.default};exports.default=f;
},{"./elems/r-tabs.js":"eKHE","./elems/r-form.js":"aahd","./elems/r-panel.js":"bgTB","./elems/r-list.js":"mVSt","./elems/r-item.js":"i8YR","./elems/r-paginator.js":"otkn","./elems/r-table.js":"gfy4","./elems/r-select.js":"PfF3"}],"epB2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Template=exports.Collection=exports.Flattenable=exports.Schema=exports.ModelList=exports.Model=exports.EventDispatcher=exports.Event=exports.Class=exports.Rin=exports.Anim=exports.Easing=exports.DataSource=exports.Api=exports.Element=exports.Router=void 0;var e=c(require("./router.js")),t=c(require("./element.js")),r=c(require("./api.js")),o=c(require("./data-source.js")),s=c(require("./easing.js")),n=c(require("./anim.js")),p=c(require("./elements.js")),a=l(require("@rsthn/rin"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function l(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=o?Object.getOwnPropertyDescriptor(e,s):null;n&&(n.get||n.set)?Object.defineProperty(r,s,n):r[s]=e[s]}return r.default=e,t&&t.set(e,r),r}function c(e){return e&&e.__esModule?e:{default:e}}const u=e.default;exports.Router=u;const x=t.default;exports.Element=x;const f=r.default;exports.Api=f;const d=o.default;exports.DataSource=d;const j=s.default;exports.Easing=j;const v=n.default;exports.Anim=v;const m=a.Rin;exports.Rin=m;const M=a.Class;exports.Class=M;const b=a.Event;exports.Event=b;const y=a.EventDispatcher;exports.EventDispatcher=y;const E=a.Model;exports.Model=E;const h=a.ModelList;exports.ModelList=h;const O=a.Schema;exports.Schema=O;const q=a.Flattenable;exports.Flattenable=q;const g=a.Collection;exports.Collection=g;const D=a.Template;exports.Template=D;
},{"./router.js":"hPM2","./element.js":"yFRv","./api.js":"LVu9","./data-source.js":"rn2q","./easing.js":"gfrO","./anim.js":"Cd1J","./elements.js":"uIMb","@rsthn/rin":"OHwo"}]},{},["epB2"], "rfront")